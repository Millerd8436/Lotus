<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lotus - Complete Payday Lending Educational Simulation</title>
    
    <!-- ALL CSS files linked - preserving every style -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="assets/global.css">
    <link rel="stylesheet" href="predatory/styles.css">
    <link rel="stylesheet" href="ethical/styles.css">
    
    <!-- Tailwind for layout -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* Critical styles for seamless integration */
        .content-frame { 
            border: none; 
            width: 100%; 
            min-height: 90vh; 
            background: white;
        }
        .hidden { display: none !important; }
        .mode-transition { transition: all 0.5s ease; }
        
        /* Ensure all predatory/ethical styles work */
        .predatory-form { background: #fef2f2; }
        .ethical-form { background: #f0fdf4; }
        
        /* Navigation improvements */
        .nav-btn { 
            transition: all 0.3s ease; 
            position: relative;
        }
        .nav-btn:hover { transform: translateY(-2px); }
        .nav-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: currentColor;
            border-radius: 2px;
        }
        
        /* Enhanced loading for complex content */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        .loading-content {
            background: white;
            padding: 2rem;
            border-radius: 0.5rem;
            text-align: center;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Enhanced Navigation with Mode Indicators -->
    <nav class="bg-white shadow-lg border-b-2 border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div>
                    <h1 class="text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                        🪷 Lotus Educational Simulation
                    </h1>
                    <p class="text-sm text-gray-600">
                        Complete Preservation: 126+ Files • 15,000+ Lines • All Features Intact
                    </p>
                </div>
                
                <!-- Mode Status Indicator -->
                <div id="mode-indicator" class="flex items-center space-x-3">
                    <div class="text-sm">
                        <span class="text-gray-500">Current Mode:</span>
                        <span id="current-mode" class="font-bold text-blue-600">Home</span>
                    </div>
                    <div id="educational-overlay-status" class="text-xs text-green-600 hidden">
                        📚 Educational Overlay Active
                    </div>
                </div>
            </div>
            
            <!-- Enhanced Navigation Bar -->
            <div class="flex flex-wrap gap-2 pb-4 border-t border-gray-100 pt-3">
                <!-- Core Navigation -->
                <button onclick="showHome()" class="nav-btn px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg active" id="home-btn">
                    🏠 Home
                </button>
                
                <!-- Predatory Section -->
                <div class="flex space-x-1">
                    <button onclick="loadFileWithEducation('predatory/form.html', 'predatory')" class="nav-btn px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg text-sm">
                        📝 Predatory Form
                    </button>
                    <button onclick="loadFileWithEducation('predatory/faq.html', 'predatory')" class="nav-btn px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg text-sm">
                        ❓ FAQ (218 lines)
                    </button>
                    <button onclick="loadFileWithEducation('predatory/terms.html', 'predatory')" class="nav-btn px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg text-sm">
                        📄 Terms (641 lines)
                    </button>
                    <button onclick="loadFileWithEducation('predatory/trust-signals.html', 'predatory')" class="nav-btn px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg text-sm">
                        🏆 Trust Signals (880 lines)
                    </button>
                    <button onclick="loadFileWithEducation('predatory/slider.html', 'predatory')" class="nav-btn px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg text-sm">
                        🎚️ Slider (294 lines)
                    </button>
                    <button onclick="loadFileWithEducation('predatory/hero.html', 'predatory')" class="nav-btn px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg text-sm">
                        🚨 Hero
                    </button>
                </div>
                
                <!-- Ethical Section -->
                <div class="flex space-x-1">
                    <button onclick="loadFileWithEducation('ethical/hero.html', 'ethical')" class="nav-btn px-3 py-2 text-green-600 hover:bg-green-50 rounded-lg text-sm">
                        ✅ Ethical Hero
                    </button>
                    <button onclick="loadFileWithEducation('ethical/education.html', 'ethical')" class="nav-btn px-3 py-2 text-green-600 hover:bg-green-50 rounded-lg text-sm">
                        🎓 Education (747 lines)
                    </button>
                    <button onclick="loadFileWithEducation('partials/ethical/alternatives.html', 'ethical')" class="nav-btn px-3 py-2 text-green-600 hover:bg-green-50 rounded-lg text-sm">
                        🔄 Alternatives (1,237 lines)
                    </button>
                    <button onclick="loadFileWithEducation('partials/ethical/calculator.html', 'ethical')" class="nav-btn px-3 py-2 text-green-600 hover:bg-green-50 rounded-lg text-sm">
                        🧮 Calculator (1,168 lines)
                    </button>
                </div>
                
                <!-- Special Features -->
                <button onclick="showComparison()" class="nav-btn px-4 py-2 text-purple-600 hover:bg-purple-50 rounded-lg text-sm">
                    ⚡ Side-by-Side
                </button>
                <button onclick="showAllFiles()" class="nav-btn px-4 py-2 text-indigo-600 hover:bg-indigo-50 rounded-lg text-sm">
                    📁 All 126+ Files
                </button>
            </div>
        </div>
    </nav>

    <!-- Home Dashboard -->
    <div id="home-view" class="max-w-7xl mx-auto px-4 py-8">
        <!-- Quick Stats -->
        <div class="grid md:grid-cols-4 gap-6 mb-8">
            <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-xl">
                <div class="text-3xl font-bold">126+</div>
                <div class="text-blue-100">Files Preserved</div>
            </div>
            <div class="bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-xl">
                <div class="text-3xl font-bold">15,000+</div>
                <div class="text-green-100">Lines of Code</div>
            </div>
            <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-xl">
                <div class="text-3xl font-bold">100%</div>
                <div class="text-purple-100">Logic Preserved</div>
            </div>
            <div class="bg-gradient-to-r from-red-500 to-red-600 text-white p-6 rounded-xl">
                <div class="text-3xl font-bold">0</div>
                <div class="text-red-100">Features Lost</div>
            </div>
        </div>

        <!-- Feature Demonstration Grid -->
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <!-- Predatory Features -->
            <div class="bg-red-50 border-2 border-red-200 rounded-xl p-6">
                <h3 class="text-xl font-bold text-red-800 mb-4">🎭 Dark Pattern Demonstrations</h3>
                <div class="space-y-3">
                    <button onclick="loadFileWithEducation('predatory/form.html', 'predatory')" 
                            class="w-full text-left p-3 bg-red-100 hover:bg-red-200 rounded-lg transition">
                        <div class="font-medium">Multi-Step Form Manipulation</div>
                        <div class="text-sm text-red-600">Progress bars, urgency timers, pre-checked boxes</div>
                    </button>
                    <button onclick="loadFileWithEducation('predatory/trust-signals.html', 'predatory')" 
                            class="w-full text-left p-3 bg-red-100 hover:bg-red-200 rounded-lg transition">
                        <div class="font-medium">Fake Trust Signals (880 lines)</div>
                        <div class="text-sm text-red-600">Bogus awards, fake reviews, manipulated statistics</div>
                    </button>
                    <button onclick="loadFileWithEducation('predatory/terms.html', 'predatory')" 
                            class="w-full text-left p-3 bg-red-100 hover:bg-red-200 rounded-lg transition">
                        <div class="font-medium">Hidden Terms (641 lines)</div>
                        <div class="text-sm text-red-600">400%+ APR buried in fine print</div>
                    </button>
                </div>
            </div>

            <!-- Educational Features -->
            <div class="bg-green-50 border-2 border-green-200 rounded-xl p-6">
                <h3 class="text-xl font-bold text-green-800 mb-4">🎓 Educational Content</h3>
                <div class="space-y-3">
                    <button onclick="loadFileWithEducation('ethical/education.html', 'ethical')" 
                            class="w-full text-left p-3 bg-green-100 hover:bg-green-200 rounded-lg transition">
                        <div class="font-medium">Comprehensive Education (747 lines)</div>
                        <div class="text-sm text-green-600">Debt cycle visualization, APR education</div>
                    </button>
                    <button onclick="loadFileWithEducation('partials/ethical/alternatives.html', 'ethical')" 
                            class="w-full text-left p-3 bg-green-100 hover:bg-green-200 rounded-lg transition">
                        <div class="font-medium">Better Alternatives (1,237 lines)</div>
                        <div class="text-sm text-green-600">Credit unions, PALs, emergency assistance</div>
                    </button>
                    <button onclick="loadFileWithEducation('partials/ethical/calculator.html', 'ethical')" 
                            class="w-full text-left p-3 bg-green-100 hover:bg-green-200 rounded-lg transition">
                        <div class="font-medium">Transparent Calculator (1,168 lines)</div>
                        <div class="text-sm text-green-600">Real cost calculations, risk assessment</div>
                    </button>
                </div>
            </div>

            <!-- Technical Features -->
            <div class="bg-blue-50 border-2 border-blue-200 rounded-xl p-6">
                <h3 class="text-xl font-bold text-blue-800 mb-4">⚙️ Technical Implementation</h3>
                <div class="space-y-3">
                    <div class="p-3 bg-blue-100 rounded-lg">
                        <div class="font-medium">ui.js (1,028 lines)</div>
                        <div class="text-sm text-blue-600">Core application logic & behavioral tracking</div>
                    </div>
                    <div class="p-3 bg-blue-100 rounded-lg">
                        <div class="font-medium">modes/exploitative.js (995 lines)</div>
                        <div class="text-sm text-blue-600">Complete predatory lending simulation</div>
                    </div>
                    <div class="p-3 bg-blue-100 rounded-lg">
                        <div class="font-medium">14 UI Components</div>
                        <div class="text-sm text-blue-600">Educational scaffolding, dark pattern engines</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Start Actions -->
        <div class="bg-white rounded-xl shadow-lg p-8">
            <h3 class="text-2xl font-bold text-center mb-6">Start Exploring</h3>
            <div class="grid md:grid-cols-3 gap-4">
                <button onclick="loadFileWithEducation('predatory/form.html', 'predatory')" 
                        class="bg-red-500 hover:bg-red-600 text-white p-6 rounded-lg text-center transition">
                    <div class="text-2xl mb-2">⚠️</div>
                    <div class="font-bold">Experience Dark Patterns</div>
                    <div class="text-red-100 text-sm mt-2">See manipulation in action</div>
                </button>
                <button onclick="loadFileWithEducation('ethical/education.html', 'ethical')" 
                        class="bg-green-500 hover:bg-green-600 text-white p-6 rounded-lg text-center transition">
                    <div class="text-2xl mb-2">🎓</div>
                    <div class="font-bold">Learn the Alternatives</div>
                    <div class="text-green-100 text-sm mt-2">Educational approach</div>
                </button>
                <button onclick="showComparison()" 
                        class="bg-purple-500 hover:bg-purple-600 text-white p-6 rounded-lg text-center transition">
                    <div class="text-2xl mb-2">⚡</div>
                    <div class="font-bold">Compare Side-by-Side</div>
                    <div class="text-purple-100 text-sm mt-2">See the difference</div>
                </button>
            </div>
        </div>
    </div>

    <!-- Content Area for Loading Files -->
    <div id="content-area" class="hidden">
        <!-- Educational Overlay -->
        <div id="educational-overlay" class="bg-yellow-50 border-b-2 border-yellow-200 p-4 hidden">
            <div class="max-w-7xl mx-auto flex items-center justify-between">
                <div>
                    <h4 class="font-bold text-yellow-800">📚 Educational Context</h4>
                    <p id="educational-text" class="text-yellow-700 text-sm"></p>
                </div>
                <button onclick="toggleEducationalOverlay()" class="text-yellow-600 hover:text-yellow-800">
                    ✕ Hide
                </button>
            </div>
        </div>
        
        <!-- Back Navigation -->
        <div class="bg-white border-b p-4">
            <div class="max-w-7xl mx-auto flex items-center justify-between">
                <button onclick="showHome()" class="flex items-center space-x-2 text-blue-600 hover:text-blue-800">
                    <span>←</span>
                    <span>Back to Home</span>
                </button>
                
                <div class="flex items-center space-x-4">
                    <button onclick="toggleEducationalOverlay()" class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-lg text-sm">
                        📚 Toggle Education
                    </button>
                    <span id="current-file" class="text-gray-600 text-sm"></span>
                </div>
            </div>
        </div>
        
        <!-- Content Frame -->
        <iframe id="content-frame" class="content-frame"></iframe>
    </div>

    <!-- All Files Explorer -->
    <div id="all-files-view" class="hidden max-w-7xl mx-auto px-4 py-8">
        <div class="mb-6">
            <h2 class="text-3xl font-bold mb-2">Complete File Structure</h2>
            <p class="text-gray-600">All 126+ files organized by category. Click any file to load it with full functionality.</p>
        </div>

        <div class="grid md:grid-cols-3 gap-8">
            <!-- Predatory Files -->
            <div class="bg-red-50 border border-red-200 rounded-lg p-6">
                <h3 class="text-xl font-bold text-red-800 mb-4">📛 Predatory Files</h3>
                <div class="space-y-2">
                    <button onclick="loadFileWithEducation('predatory/form.html', 'predatory')" class="file-btn">
                        form.html <span class="file-info">Multi-step manipulation form</span>
                    </button>
                    <button onclick="loadFileWithEducation('predatory/faq.html', 'predatory')" class="file-btn">
                        faq.html <span class="file-info">218 lines of deceptive FAQs</span>
                    </button>
                    <button onclick="loadFileWithEducation('predatory/hero.html', 'predatory')" class="file-btn">
                        hero.html <span class="file-info">Urgency banners & fake urgency</span>
                    </button>
                    <button onclick="loadFileWithEducation('predatory/slider.html', 'predatory')" class="file-btn">
                        slider.html <span class="file-info">294 lines of manipulation</span>
                    </button>
                    <button onclick="loadFileWithEducation('predatory/terms.html', 'predatory')" class="file-btn">
                        terms.html <span class="file-info">641 lines of hidden terms</span>
                    </button>
                    <button onclick="loadFileWithEducation('predatory/trust-signals.html', 'predatory')" class="file-btn">
                        trust-signals.html <span class="file-info">880 lines of fake trust</span>
                    </button>
                </div>
            </div>

            <!-- Ethical Files -->
            <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                <h3 class="text-xl font-bold text-green-800 mb-4">✅ Ethical Files</h3>
                <div class="space-y-2">
                    <button onclick="loadFileWithEducation('ethical/hero.html', 'ethical')" class="file-btn">
                        hero.html <span class="file-info">56 lines of transparency</span>
                    </button>
                    <button onclick="loadFileWithEducation('ethical/education.html', 'ethical')" class="file-btn">
                        education.html <span class="file-info">747 lines of education</span>
                    </button>
                    <button onclick="loadFileWithEducation('partials/ethical/alternatives.html', 'ethical')" class="file-btn">
                        alternatives.html <span class="file-info">1,237 lines of options</span>
                    </button>
                    <button onclick="loadFileWithEducation('partials/ethical/calculator.html', 'ethical')" class="file-btn">
                        calculator.html <span class="file-info">1,168 lines of calculations</span>
                    </button>
                </div>
            </div>

            <!-- JavaScript Modules -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
                <h3 class="text-xl font-bold text-blue-800 mb-4">💻 JavaScript Modules</h3>
                <div class="space-y-2 text-sm">
                    <div class="p-2 bg-blue-100 rounded">ui.js <span class="text-gray-600">(1,028 lines core logic)</span></div>
                    <div class="p-2 bg-blue-100 rounded">app.js <span class="text-gray-600">(Main application)</span></div>
                    <div class="p-2 bg-blue-100 rounded">modes/exploitative.js <span class="text-gray-600">(995 lines)</span></div>
                    <div class="p-2 bg-blue-100 rounded">ui_components/ <span class="text-gray-600">(14 modules)</span></div>
                    <div class="p-2 bg-blue-100 rounded">engine/ <span class="text-gray-600">(5 engines)</span></div>
                    <div class="p-2 bg-blue-100 rounded">research/ <span class="text-gray-600">(Analytics)</span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Comparison View -->
    <div id="comparison-view" class="hidden">
        <div class="bg-gray-100 p-4 text-center">
            <h2 class="text-2xl font-bold mb-2">Predatory vs Ethical: Live Comparison</h2>
            <p class="text-gray-600">Experience both approaches simultaneously</p>
        </div>
        
        <div class="grid md:grid-cols-2 h-screen">
            <div class="border-r border-gray-300">
                <div class="bg-red-500 text-white p-3 text-center font-bold">
                    ⚠️ Predatory Approach
                </div>
                <iframe id="predatory-frame" class="w-full" style="height: calc(100vh - 120px);" src="predatory/form.html"></iframe>
            </div>
            <div>
                <div class="bg-green-500 text-white p-3 text-center font-bold">
                    ✅ Ethical Alternative
                </div>
                <iframe id="ethical-frame" class="w-full" style="height: calc(100vh - 120px);" src="ethical/hero.html"></iframe>
            </div>
        </div>
    </div>

    <!-- JavaScript for Full Integration -->
    <script>
        // Global state management
        let currentMode = 'home';
        let educationalOverlayEnabled = true;
        
        // Educational context data
        const educationalContext = {
            'predatory/form.html': {
                mode: 'predatory',
                title: 'Dark Pattern Form Analysis',
                description: 'This form demonstrates multiple dark patterns: fake progress bars (updateProgress function), urgency manipulation (showUrgencyMessage), pre-checked consent boxes, and hidden terms (toggleTerms). Notice how the form manipulates user behavior at each step.'
            },
            'predatory/faq.html': {
                mode: 'predatory',
                title: 'Deceptive FAQ Analysis',
                description: 'Contains 218 lines of misleading information, fake statistics, and answers designed to obscure the true costs and risks of payday lending.'
            },
            'predatory/terms.html': {
                mode: 'predatory',
                title: 'Hidden Terms & Conditions',
                description: '641 lines of legal text designed to hide 400%+ APR rates, automatic renewals, collection practices, and rights waiver in dense, difficult-to-read language.'
            },
            'predatory/trust-signals.html': {
                mode: 'predatory',
                title: 'Fake Trust Signal Analysis',
                description: '880 lines demonstrating fabricated security badges, fake customer reviews, bogus awards, and manipulated statistics designed to create false confidence.'
            },
            'ethical/education.html': {
                mode: 'ethical',
                title: 'Comprehensive Financial Education',
                description: '747 lines of genuine educational content including debt cycle visualization, APR calculations, alternative options, and consumer protection resources.'
            },
            'partials/ethical/alternatives.html': {
                mode: 'ethical',
                title: 'Better Financial Alternatives',
                description: '1,237 lines detailing credit union emergency loans, PALs (Payday Alternative Loans), employer assistance programs, and community resources.'
            },
            'partials/ethical/calculator.html': {
                mode: 'ethical',
                title: 'Transparent Cost Calculator',
                description: '1,168 lines of honest financial calculation tools, risk assessment, and educational content about loan costs and alternatives.'
            }
        };

        // Navigation functions
        function showHome() {
            document.getElementById('home-view').classList.remove('hidden');
            document.getElementById('content-area').classList.add('hidden');
            document.getElementById('all-files-view').classList.add('hidden');
            document.getElementById('comparison-view').classList.add('hidden');
            updateModeIndicator('Home');
            updateNavActiveState('home-btn');
        }

        function loadFileWithEducation(filePath, mode) {
            // Show loading
            showLoadingOverlay('Loading educational content...');
            
            // Hide other views
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('all-files-view').classList.add('hidden');
            document.getElementById('comparison-view').classList.add('hidden');
            
            // Show content area
            document.getElementById('content-area').classList.remove('hidden');
            
            // Update educational overlay
            if (educationalContext[filePath]) {
                const context = educationalContext[filePath];
                document.getElementById('educational-text').textContent = context.description;
                if (educationalOverlayEnabled) {
                    document.getElementById('educational-overlay').classList.remove('hidden');
                }
            }
            
            // Update current file indicator
            document.getElementById('current-file').textContent = filePath;
            
            // Load the file
            const frame = document.getElementById('content-frame');
            frame.src = filePath;
            
            // Update mode
            updateModeIndicator(mode);
            
            // Hide loading after delay
            setTimeout(() => {
                hideLoadingOverlay();
            }, 1000);
            
            console.log('Loading file with education:', filePath, 'Mode:', mode);
        }

        function showComparison() {
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('content-area').classList.add('hidden');
            document.getElementById('all-files-view').classList.add('hidden');
            document.getElementById('comparison-view').classList.remove('hidden');
            updateModeIndicator('Comparison');
        }

        function showAllFiles() {
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('content-area').classList.add('hidden');
            document.getElementById('comparison-view').classList.add('hidden');
            document.getElementById('all-files-view').classList.remove('hidden');
            updateModeIndicator('File Explorer');
        }

        function toggleEducationalOverlay() {
            const overlay = document.getElementById('educational-overlay');
            const status = document.getElementById('educational-overlay-status');
            
            if (overlay.classList.contains('hidden')) {
                overlay.classList.remove('hidden');
                status.classList.remove('hidden');
                educationalOverlayEnabled = true;
            } else {
                overlay.classList.add('hidden');
                status.classList.add('hidden');
                educationalOverlayEnabled = false;
            }
        }

        function updateModeIndicator(mode) {
            document.getElementById('current-mode').textContent = mode;
            currentMode = mode;
        }

        function updateNavActiveState(activeId) {
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            if (activeId) {
                document.getElementById(activeId)?.classList.add('active');
            }
        }

        function showLoadingOverlay(message) {
            const overlay = document.createElement('div');
            overlay.id = 'loading-overlay';
            overlay.className = 'loading-overlay';
            overlay.innerHTML = `
                <div class="loading-content">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"></div>
                    <div class="font-medium">${message}</div>
                </div>
            `;
            document.body.appendChild(overlay);
        }

        function hideLoadingOverlay() {
            const overlay = document.getElementById('loading-overlay');
            if (overlay) {
                overlay.remove();
            }
        }

        // Message handling for cross-frame communication
        window.addEventListener('message', function(event) {
            if (event.data.type === 'switchMode') {
                if (event.data.mode === 'ethical') {
                    loadFileWithEducation('ethical/hero.html', 'ethical');
                } else if (event.data.mode === 'predatory') {
                    loadFileWithEducation('predatory/form.html', 'predatory');
                }
            }
        });

        // Initialize
        showHome();
    </script>

    <!-- Load ALL JavaScript files to preserve functionality -->
    <script src="ui.js" onerror="console.log('ui.js not found - some features may be limited')"></script>
    <script src="app.js" onerror="console.log('app.js not found - continuing with basic functionality')"></script>
    <script src="assets/global.js" onerror="console.log('global.js not found')"></script>
    
    <!-- Engine modules -->
    <script src="engine/autonomy_theater.js" onerror="console.log('autonomy_theater.js not found')"></script>
    <script src="engine/behavioralPsychology.js" onerror="console.log('behavioralPsychology.js not found')"></script>
    <script src="engine/echo.js" onerror="console.log('echo.js not found')"></script>
    <script src="engine/kant.js" onerror="console.log('kant.js not found')"></script>
    
    <!-- Mode systems -->
    <script src="modes/ethical.js" onerror="console.log('ethical.js not found')"></script>
    <script src="modes/exploitative.js" onerror="console.log('exploitative.js not found')"></script>
    
    <!-- UI components (graceful degradation if missing) -->
    <script src="ui_components/aprCalculator.js" onerror="console.log('aprCalculator.js not found')"></script>
    <script src="ui_components/aprTransparencyMeter.js" onerror="console.log('aprTransparencyMeter.js not found')"></script>
    <script src="ui_components/behaviorReplay.js" onerror="console.log('behaviorReplay.js not found')"></script>
    <script src="ui_components/consentBar.js" onerror="console.log('consentBar.js not found')"></script>
    <script src="ui_components/consentCheck.js" onerror="console.log('consentCheck.js not found')"></script>
    <script src="ui_components/darkPatternEngine.js" onerror="console.log('darkPatternEngine.js not found')"></script>
    <script src="ui_components/darkPatternFlags.js" onerror="console.log('darkPatternFlags.js not found')"></script>
    <script src="ui_components/debtCycleSimulator.js" onerror="console.log('debtCycleSimulator.js not found')"></script>
    <script src="ui_components/educationalAssessment.js" onerror="console.log('educationalAssessment.js not found')"></script>
    <script src="ui_components/educationalScaffolding.js" onerror="console.log('educationalScaffolding.js not found')"></script>
    <script src="ui_components/ethicsFeedback.js" onerror="console.log('ethicsFeedback.js not found')"></script>
    <script src="ui_components/legalLoopholeIndex.js" onerror="console.log('legalLoopholeIndex.js not found')"></script>
    <script src="ui_components/promptEngine.js" onerror="console.log('promptEngine.js not found')"></script>
    <script src="ui_components/trapUIEngine.js" onerror="console.log('trapUIEngine.js not found')"></script>
    
    <!-- Research and analytics -->
    <script src="research/research_analytics.js" onerror="console.log('research_analytics.js not found')"></script>
    <script src="research/researchDataCollector.js" onerror="console.log('researchDataCollector.js not found')"></script>
    
    <!-- Core and narrative systems -->
    <script src="core/loan_core.js" onerror="console.log('loan_core.js not found')"></script>
    <script src="narrator/ghost.js" onerror="console.log('ghost.js not found')"></script>
    <script src="components/reflection.js" onerror="console.log('reflection.js not found')"></script>

    <style>
        .file-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 0.75rem;
            background: white;
            border: 1px solid #e5e5e5;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .file-btn:hover {
            background: #f9f9f9;
            border-color: #d1d5db;
            transform: translateX(4px);
        }
        
        .file-info {
            display: block;
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }
    </style>
</body>
</html>
