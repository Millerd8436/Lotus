<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickCash Solutions - Get Cash Fast! Instant Approval | Educational Simulation</title>
    <meta name="description" content="Interactive educational simulation of predatory payday lending practices. Experience realistic interface while learning about financial ethics and consumer protection.">
    <!-- Tailwind CSS for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Alpine.js for interactivity -->
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
    <!-- Google Fonts for professional look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { 
            font-family: 'Inter', 'Roboto', sans-serif; 
            scroll-behavior: smooth;
        }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .cash-green { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
        .danger-red { background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%); }
        .education-blue { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        
        .urgent-pulse { animation: pulse-urgent 1.5s infinite; }
        @keyframes pulse-urgent {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.9; }
        }
        
        .slide-in { animation: slideIn 0.5s ease-out; }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .float-animation { animation: float 3s ease-in-out infinite; }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .glow-effect {
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
            transition: all 0.3s ease;
        }
        
        .glow-effect:hover {
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.6);
        }
        
        .educational-overlay {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
        }
        
        .dark-pattern-highlight {
            outline: 2px dashed #ef4444;
            outline-offset: 2px;
            background: rgba(239, 68, 68, 0.1);
        }
        
        .ethical-highlight {
            outline: 2px solid #10b981;
            outline-offset: 2px;
            background: rgba(16, 185, 129, 0.1);
        }
        
        .dark-pattern-highlight {
            outline: 2px dashed #ef4444;
            outline-offset: 2px;
            background: rgba(239, 68, 68, 0.1);
        }
        
        .ethical-highlight {
            outline: 2px solid #10b981;
            outline-offset: 2px;
            background: rgba(16, 185, 129, 0.1);
        }
        
        /* Educational toggle styling */
        #enable-educational-mode:checked + div .dot {
            transform: translateX(100%);
            background-color: #10b981;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 antialiased">

    <!-- Educational Mode Toggle (Floating) -->
    <div id="educational-toggle" class="fixed top-4 left-4 z-50 bg-blue-600 text-white p-3 rounded-lg shadow-lg">
        <label class="flex items-center space-x-2 cursor-pointer">
            <input type="checkbox" id="enable-educational-mode" class="sr-only">
            <div class="relative">
                <div class="block bg-gray-600 w-14 h-8 rounded-full"></div>
                <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition"></div>
            </div>
            <span class="text-sm font-medium">🎓 Educational</span>
        </label>
    </div>

    <!-- Simulation Intensity Control -->
    <div id="intensity-control" class="fixed top-4 right-4 z-50 bg-purple-600 text-white p-3 rounded-lg shadow-lg">
        <div class="space-y-2">
            <span class="text-sm font-medium block">Mode:</span>
            <div class="flex space-x-2 text-xs">
                <label class="flex items-center">
                    <input type="radio" name="simulation-intensity" value="basic" class="mr-1" checked>
                    Basic
                </label>
                <label class="flex items-center">
                    <input type="radio" name="simulation-intensity" value="research" class="mr-1">
                    Research
                </label>
            </div>
        </div>
    </div>

    <!-- Educational Alert Bar -->
    <div id="educational-alert" class="hidden bg-blue-600 text-white text-center py-2 z-30">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex items-center justify-center space-x-2 text-sm">
                <i class="fas fa-graduation-cap"></i>
                <span>🎓 Educational Mode Active - Learning about predatory lending practices</span>
                <button id="show-educational-dashboard" class="bg-white text-blue-600 px-2 py-1 rounded text-xs font-medium ml-4">
                    Dashboard
                </button>
            </div>
        </div>
    </div>

    <!-- Professional Navigation Header -->
    <nav class="bg-white shadow-lg border-b-4 border-green-500 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-dollar-sign text-green-600 text-2xl"></i>
                        <span class="text-2xl font-bold text-gray-800">QuickCash</span>
                        <span class="text-lg text-green-600 font-semibold">Solutions</span>
                    </div>
                    <div class="hidden md:flex items-center space-x-1 text-xs bg-green-100 px-2 py-1 rounded-full">
                        <i class="fas fa-shield-alt text-green-600"></i>
                        <span class="text-green-700 font-medium">SSL Secured</span>
                    </div>
                </div>
                
                <div class="hidden md:flex items-center space-x-6 text-sm">
                    <a href="#" class="text-gray-600 hover:text-green-600 font-medium">How It Works</a>
                    <a href="#" class="text-gray-600 hover:text-green-600 font-medium">Rates & Terms</a>
                    <a href="#" class="text-gray-600 hover:text-green-600 font-medium">Support</a>
                    <div class="flex items-center space-x-2 text-green-600">
                        <i class="fas fa-phone"></i>
                        <span class="font-semibold">1-800-QUICK-$$</span>
                    </div>
                </div>
                
                <div class="md:hidden">
                    <button class="text-gray-600">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div id="container" class="min-h-screen">
        <!-- Hero Section with Realistic Payday Loan Marketing -->
        <section class="cash-green py-16 text-white relative overflow-hidden">
            <div class="absolute inset-0 opacity-10">
                <div class="absolute top-10 left-10 text-8xl opacity-20">💰</div>
                <div class="absolute bottom-10 right-10 text-8xl opacity-20">💵</div>
                <div class="absolute top-1/2 left-1/4 text-6xl opacity-15">💳</div>
            </div>
            
            <div class="max-w-6xl mx-auto px-4 relative z-10">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <div class="slide-in">
                            <h1 class="text-5xl lg:text-6xl font-bold leading-tight">
                                Get Cash 
                                <span class="text-yellow-300">FAST!</span>
                            </h1>
                            <p class="text-xl lg:text-2xl font-medium text-green-100 mt-4">
                                Up to $1,500 in your account in minutes!
                            </p>
                        </div>
                        
                        <div class="space-y-4 text-lg">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-check-circle text-yellow-300 text-xl"></i>
                                <span>✅ <strong>Instant Approval</strong> - Decision in 90 seconds</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-check-circle text-yellow-300 text-xl"></i>
                                <span>✅ <strong>No Credit Check</strong> - Bad credit OK!</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-check-circle text-yellow-300 text-xl"></i>
                                <span>✅ <strong>Fast Funding</strong> - Money today</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-check-circle text-yellow-300 text-xl"></i>
                                <span>✅ <strong>100% Online</strong> - No paperwork</span>
                            </div>
                        </div>
                        
                        <div class="bg-white bg-opacity-20 backdrop-blur-sm rounded-lg p-4 border border-white border-opacity-30">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-green-100">Current Promotion:</p>
                                    <p class="text-xl font-bold text-yellow-300">First-time customers save $25!</p>
                                </div>
                                <div class="urgent-pulse bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                                    LIMITED TIME
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Professional Application Form -->
                    <div class="bg-white rounded-2xl shadow-2xl p-8 text-gray-800">
                        <div class="text-center mb-6">
                            <h2 class="text-3xl font-bold text-gray-800 mb-2">Get Started Now!</h2>
                            <p class="text-gray-600">Complete your application in under 2 minutes</p>
                            <div class="flex items-center justify-center space-x-2 mt-2 text-sm text-green-600">
                                <i class="fas fa-lock"></i>
                                <span>Your information is 100% secure</span>
                            </div>
                        </div>
                        
                        <form class="space-y-4" id="loan-application-form">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">How much do you need?</label>
                                <div class="relative">
                                    <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 font-bold">$</span>
                                    <input type="number" id="amount-input" 
                                           class="w-full pl-8 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none text-lg font-semibold"
                                           placeholder="500" min="100" max="1500" value="500">
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Between $100 - $1,500</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">When do you need it?</label>
                                <select id="term-input" class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none">
                                    <option value="14">Today (14-day loan)</option>
                                    <option value="30">Within a week (30-day loan)</option>
                                    <option value="90">Next month (90-day loan)</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Your State</label>
                                <select id="state-input" class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none">
                                    <option value="TX">Texas</option>
                                    <option value="CA">California</option>
                                    <option value="FL">Florida</option>
                                    <option value="NY">New York</option>
                                    <option value="IL">Illinois</option>
                                    <option value="GEN">Other State</option>
                                </select>
                            </div>
                            
                            <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Estimated APR:</span>
                                    <span id="estimated-apr" class="font-bold text-green-600">calculating...</span>
                                </div>
                                <div class="flex items-center justify-between text-sm mt-1">
                                    <span class="text-gray-600">Total to repay:</span>
                                    <span id="estimated-total" class="font-bold text-gray-800">calculating...</span>
                                </div>
                            </div>
                        </form>
                        
                        <div class="mt-6 space-y-3">
                            <button id="start-exploit" class="w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-4 px-6 rounded-lg text-lg transition-all duration-200 transform hover:scale-105 shadow-lg urgent-pulse">
                                🚀 GET INSTANT APPROVAL NOW!
                            </button>
                            
                            <div class="text-center">
                                <button id="start-regulated" class="text-sm text-gray-500 hover:text-gray-700 underline">
                                    View regulated/educational version
                                </button>
                            </div>
                        </div>
                        
                        <div class="mt-4 text-xs text-gray-500 text-center space-y-1">
                            <p>By clicking "Get Instant Approval" you agree to our Terms & Privacy Policy</p>
                            <p>Representative APR: 199% - 999% | Loan terms: 14-90 days</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Professional Trust Indicators Section -->
        <section class="bg-white py-12">
            <div class="max-w-6xl mx-auto px-4">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
                    <div class="space-y-2">
                        <div class="text-3xl text-green-600">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="text-2xl font-bold text-gray-800">2M+</div>
                        <div class="text-sm text-gray-600">Happy Customers</div>
                    </div>
                    <div class="space-y-2">
                        <div class="text-3xl text-green-600">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="text-2xl font-bold text-gray-800">90 sec</div>
                        <div class="text-sm text-gray-600">Average Approval</div>
                    </div>
                    <div class="space-y-2">
                        <div class="text-3xl text-green-600">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="text-2xl font-bold text-gray-800">4.8/5</div>
                        <div class="text-sm text-gray-600">Customer Rating</div>
                    </div>
                    <div class="space-y-2">
                        <div class="text-3xl text-green-600">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="text-2xl font-bold text-gray-800">100%</div>
                        <div class="text-sm text-gray-600">Secure & Safe</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Urgency Banner for Exploitative Mode -->
        <div id="urgency-banner" class="hidden sticky top-16 z-40">
            <div class="bg-gradient-to-r from-red-600 to-red-700 text-white text-center py-4 shadow-lg">
                <div class="max-w-6xl mx-auto px-4">
                    <div class="flex items-center justify-center space-x-4">
                        <div class="urgent-pulse">
                            <i class="fas fa-fire text-yellow-300 text-xl"></i>
                        </div>
                        <div>
                            <span class="text-lg font-bold">⚡ SPECIAL OFFER EXPIRES IN </span>
                            <span id="timer" class="text-2xl font-black text-yellow-300 bg-red-800 px-2 py-1 rounded">05:00</span>
                            <span class="text-lg font-bold"> - LOCK IN YOUR RATE NOW! ⚡</span>
                        </div>
                        <div class="urgent-pulse">
                            <i class="fas fa-fire text-yellow-300 text-xl"></i>
                        </div>
                    </div>
                    <p class="text-sm mt-1 text-red-100">Don't miss out - rates are going up tomorrow!</p>
                </div>
            </div>
        </div>

        <!-- Cost Tracker (visible in ethical mode) -->
        <div id="cost-tracker" class="hidden">
            <div class="bg-blue-50 border-l-4 border-blue-500 py-6">
                <div class="max-w-6xl mx-auto px-4">
                    <h3 class="text-xl font-bold text-blue-800 mb-4 flex items-center">
                        <i class="fas fa-calculator mr-2"></i>
                        Cumulative Cost Tracker
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-white rounded-lg p-4 shadow-sm">
                            <div class="text-sm text-gray-600">Total Paid</div>
                            <div id="total-paid" class="text-2xl font-bold text-blue-800">$0.00</div>
                        </div>
                        <div class="bg-white rounded-lg p-4 shadow-sm">
                            <div class="text-sm text-gray-600">vs Original Loan</div>
                            <div id="cost-ratio" class="text-2xl font-bold text-red-600">0%</div>
                        </div>
                        <div class="bg-white rounded-lg p-4 shadow-sm">
                            <div class="text-sm text-gray-600">Interest Paid</div>
                            <div id="interest-paid" class="text-2xl font-bold text-orange-600">$0.00</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Professional Research and Analytics Dashboard -->
        <div id="research-dashboard" class="hidden">
            <div class="bg-gradient-to-r from-indigo-50 to-purple-50 border-t border-gray-200">
                <div class="max-w-6xl mx-auto px-4 py-8">
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <i class="fas fa-chart-bar text-indigo-600 mr-3"></i>
                            Research & Analytics Dashboard
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-indigo-50 rounded-lg p-4">
                                <div class="text-sm text-indigo-600 font-medium">Session ID</div>
                                <div id="session-id" class="text-lg font-bold text-indigo-800">#LOADING...</div>
                            </div>
                            <div class="bg-purple-50 rounded-lg p-4">
                                <div class="text-sm text-purple-600 font-medium">Decisions Tracked</div>
                                <div id="decision-count" class="text-lg font-bold text-purple-800">0</div>
                            </div>
                            <div class="bg-green-50 rounded-lg p-4">
                                <div class="text-sm text-green-600 font-medium">Data Quality</div>
                                <div id="data-quality" class="text-lg font-bold text-green-800">High</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                    <span class="text-indigo-200">Dark Patterns Detected:</span>
                    <span id="dark-pattern-count" class="font-bold text-red-300 block">0</span>
                </div>
                <div class="bg-indigo-800 p-3 rounded">
                    <span class="text-indigo-200">Education Modules Shown:</span>
                    <span id="education-module-count" class="font-bold text-green-300 block">0</span>
                </div>
            </div>
            <div class="mt-3">
                <button id="export-research-data" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 rounded-lg transition">
                    📋 Export Research Data (CSV)
                </button>
            </div>
        </div>

        <!-- NEW: Regulatory Compliance Tracker -->
        <div id="compliance-tracker" class="hidden bg-gradient-to-r from-green-900 to-teal-900 border-2 border-green-500 text-center p-4 rounded-lg mb-6 shadow-xl">
            <h3 class="text-xl font-bold text-green-200 mb-3">⚖️ Regulatory Compliance Monitor</h3>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-3 text-sm">
                <div class="bg-green-800 p-2 rounded">
                    <span class="text-green-200">CFPB Rules:</span>
                    <span id="cfpb-compliance" class="font-bold block">CHECKING...</span>
                </div>
                <div class="bg-green-800 p-2 rounded">
                    <span class="text-green-200">State Laws:</span>
                    <span id="state-compliance" class="font-bold block">CHECKING...</span>
                </div>
                <div class="bg-green-800 p-2 rounded">
                    <span class="text-green-200">MLA (Military):</span>
                    <span id="mla-compliance" class="font-bold block">N/A</span>
                </div>
                <div class="bg-green-800 p-2 rounded">
                    <span class="text-green-200">Usury Violations:</span>
                    <span id="usury-violations" class="font-bold text-red-300 block">0</span>
                </div>
            </div>
        </div>

        <!-- NEW: Educational Progress Tracker -->
        <div id="education-progress" class="hidden bg-gradient-to-r from-yellow-900 to-orange-900 border-2 border-yellow-500 text-center p-4 rounded-lg mb-6 shadow-xl">
            <h3 class="text-xl font-bold text-yellow-200 mb-3">🎓 Educational Progress Tracker</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-yellow-800 p-3 rounded">
                    <h4 class="font-bold text-yellow-200 mb-2">Knowledge Areas Covered:</h4>
                    <div id="knowledge-areas" class="text-xs text-left space-y-1">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                <div class="bg-yellow-800 p-3 rounded">
                    <h4 class="font-bold text-yellow-200 mb-2">Learning Objectives Met:</h4>
                    <div class="w-full bg-yellow-600 rounded-full h-4 mt-2">
                        <div id="learning-progress-bar" class="bg-green-500 h-4 rounded-full transition-all duration-500" style="width: 0%;"></div>
                    </div>
                    <span id="learning-percentage" class="text-xs text-yellow-200">0% Complete</span>
                </div>
            </div>
        </div>

        <main role="main">
            <!-- Section for simulation controls -->
            <section id="controls" aria-labelledby="controls-heading" class="mb-8 p-6 bg-gray-800 rounded-xl shadow-2xl border border-gray-700">
                <h2 id="controls-heading" class="text-2xl font-semibold text-center text-purple-300 mb-6">Simulation Setup</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 items-end">
                    <div class="flex flex-col">
                        <label for="state-input" class="mb-2 text-sm font-medium text-gray-400">State (e.g., CO, TX)</label>
                        <input type="text" id="state-input" placeholder="State Abbr." class="bg-gray-700 border border-gray-600 rounded-lg p-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition">
                    </div>
                    <div class="flex flex-col">
                        <label for="amount-input" class="mb-2 text-sm font-medium text-gray-400">Loan Amount ($)</label>
                        <input type="number" id="amount-input" placeholder="e.g., 500" class="bg-gray-700 border border-gray-600 rounded-lg p-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition">
                    </div>
                    <div class="flex flex-col">
                        <label for="term-input" class="mb-2 text-sm font-medium text-gray-400">Loan Term (days)</label>
                        <input type="number" id="term-input" placeholder="e.g., 14" class="bg-gray-700 border border-gray-600 rounded-lg p-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition">
                    </div>
                    <div class="flex flex-col">
                        <label for="scenario-select" class="mb-2 text-sm font-medium text-gray-400">Empathy Scenario</label>
                        <select id="scenario-select" class="bg-gray-700 border border-gray-600 rounded-lg p-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition">
                            <option value="">-- Select a Scenario --</option>
                            <option value="singleparent">Single Parent, Car Repair</option>
                            <option value="tempworker">Gig Worker, Medical Bill</option>
                        </select>
                    </div>
                </div>

                <!-- Mode Selection Section -->
                <div class="mode-selection mt-8 text-center">
                    <!-- NEW: Advanced Mode Selection with Research Options -->
                    <div class="mb-6 p-4 bg-gray-700 rounded-lg">
                        <h3 class="text-lg font-semibold text-purple-300 mb-3">🔬 Research & Education Mode</h3>
                        <div class="flex justify-center gap-4 flex-wrap mb-4">
                            <label class="flex items-center">
                                <input type="checkbox" id="enable-research-mode" class="mr-2">
                                <span class="text-sm">Enable Research Dashboard</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="enable-compliance-tracking" class="mr-2">
                                <span class="text-sm">Track Regulatory Compliance</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="enable-educational-tracking" class="mr-2">
                                <span class="text-sm">Monitor Educational Progress</span>
                            </label>
                        </div>
                        <div class="text-xs text-gray-400">
                            Research mode provides detailed analytics for academic study and policy research.
                        </div>
                    </div>

                    <!-- NEW: Simulation Intensity Settings -->
                    <div class="mb-6 p-4 bg-gray-700 rounded-lg">
                        <h3 class="text-lg font-semibold text-purple-300 mb-3">⚙️ Simulation Intensity</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="text-center">
                                <input type="radio" id="basic-simulation" name="simulation-intensity" value="basic" class="mb-2">
                                <label for="basic-simulation" class="block text-sm font-medium">
                                    📚 Basic Education
                                </label>
                                <p class="text-xs text-gray-400">Core concepts only</p>
                            </div>
                            <div class="text-center">
                                <input type="radio" id="comprehensive-simulation" name="simulation-intensity" value="comprehensive" class="mb-2" checked>
                                <label for="comprehensive-simulation" class="block text-sm font-medium">
                                    🎓 Comprehensive
                                </label>
                                <p class="text-xs text-gray-400">Full educational content</p>
                            </div>
                            <div class="text-center">
                                <input type="radio" id="research-simulation" name="simulation-intensity" value="research" class="mb-2">
                                <label for="research-simulation" class="block text-sm font-medium">
                                    🔬 Research Grade
                                </label>
                                <p class="text-xs text-gray-400">Maximum detail + data collection</p>
                            </div>
                        </div>
                    </div>

                    <p class="mb-4 font-semibold text-lg">Choose a simulation mode:</p>
                    <div class="flex justify-center gap-6 flex-wrap">
                        <!-- Enhanced buttons with research descriptions -->
                        <div class="text-center">
                            <button id="start-regulated" class="bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-green-400 mb-2">
                                🏛️ Ethical & Regulated Simulation
                            </button>
                            <p class="text-xs text-gray-400 max-w-xs">
                                Demonstrates best practices, Kantian consent, regulatory compliance, and consumer protections
                            </p>
                        </div>
                        <div class="text-center">
                            <button id="start-exploit" class="bg-red-600 hover:bg-red-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-red-400 mb-2">
                                💸 Exploitative Simulation
                            </button>
                            <p class="text-xs text-gray-400 max-w-xs">
                                Shows predatory tactics, dark patterns, and regulatory evasion techniques for educational analysis
                            </p>
                        </div>
                    </div>
                    
                    <!-- NEW: Quick Research Scenarios -->
                    <div class="mt-6 p-4 bg-gray-700 rounded-lg">
                        <h3 class="text-lg font-semibold text-purple-300 mb-3">🧪 Pre-Configured Research Scenarios</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button id="scenario-tribal-sovereignty" class="bg-purple-600 hover:bg-purple-500 text-white font-semibold py-2 px-4 rounded transition text-sm">
                                🏺 Tribal Sovereignty Loophole Study
                            </button>
                            <button id="scenario-earnin-analysis" class="bg-purple-600 hover:bg-purple-500 text-white font-semibold py-2 px-4 rounded transition text-sm">
                                📱 Earnin Tip Model Analysis
                            </button>
                            <button id="scenario-rent-a-bank" class="bg-purple-600 hover:bg-purple-500 text-white font-semibold py-2 px-4 rounded transition text-sm">
                                🏦 Rent-a-Bank Scheme Study
                            </button>
                            <button id="scenario-debt-trap-cycle" class="bg-purple-600 hover:bg-purple-500 text-white font-semibold py-2 px-4 rounded transition text-sm">
                                🔄 Debt Trap Cycle Analysis
                            </button>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">
                            Pre-configured scenarios for focused research on specific predatory lending tactics
                        </p>
                    </div>
                </div>
            </section>

            <!-- Container for the live simulation output and input -->
            <section id="simContainer" aria-labelledby="simulation-heading" class="mb-8">
                <h2 id="simulation-heading" class="sr-only">Simulation Output</h2>
                <pre id="output" class="bg-black p-6 rounded-t-lg min-h-[350px] max-h-[60vh] overflow-y-auto whitespace-pre-wrap break-words font-mono text-sm border-2 border-gray-700 border-b-0">Welcome! Please configure your simulation and select a mode to begin.</pre>
                <div id="input-area" style="display: none;" class="flex">
                    <input type="text" id="user-input" placeholder="Enter your response here..." class="flex-grow bg-gray-800 border-2 border-gray-700 p-3 rounded-bl-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <button id="submit-input" class="bg-purple-600 hover:bg-purple-500 text-white font-bold p-3 rounded-br-lg transition">Submit</button>
                </div>
            </section>

            <!-- Hidden pane for end-of-session reflection, to be populated by reflection.js -->
            <section id="reflectionPane" x-data="{ tab: 'behavior' }" aria-labelledby="reflection-heading" class="hidden mt-10 p-6 bg-gray-800 rounded-xl shadow-2xl border border-gray-700">
                <h2 id="reflection-heading" class="text-2xl font-semibold text-center text-purple-300 mb-6">Ethical Reflection & Analysis</h2>

                <!-- Tab Navigation -->
                <div class="border-b border-gray-600">
                    <nav class="-mb-px flex justify-center space-x-8" aria-label="Tabs">
                        <button @click="tab = 'behavior'" :class="{ 'border-purple-400 text-purple-300': tab === 'behavior', 'border-transparent text-gray-500 hover:text-gray-300 hover:border-gray-400': tab !== 'behavior' }" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-base focus:outline-none transition-colors">
                            Behavioral Analysis
                        </button>
                        <button @click="tab = 'ethics'" :class="{ 'border-purple-400 text-purple-300': tab === 'ethics', 'border-transparent text-gray-500 hover:text-gray-300 hover:border-gray-400': tab !== 'ethics' }" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-base focus:outline-none transition-colors">
                            Ethical Report
                        </button>
                    </nav>
                </div>

                <div id="reflection-content" class="mt-6 space-y-6">
                    <!-- Always visible: Consent Score -->
                    <div class="p-4 bg-gray-700 rounded-lg">
                        <h3 class="font-bold text-lg">Informed Consent Score:</h3>
                        <div class="w-full bg-gray-600 rounded-full h-5 mt-2">
                            <div id="consent-bar" class="bg-green-500 h-5 rounded-full transition-all duration-500" style="width: 0%;"></div>
                        </div>
                    </div>

                    <!-- Tab Panels -->
                    <div x-show="tab === 'behavior'" id="behaviorSummary" class="p-5 bg-gray-700 rounded-lg">
                        <p>Awaiting session data...</p>
                    </div>
                    <div x-show="tab === 'ethics'" id="autonomyScore" class="p-5 bg-gray-700 rounded-lg">
                        <p>Calculating...</p>
                    </div>
                    
                    <!-- Ghost message is separate -->
                    <div id="ghostMessage" class="p-4 bg-gray-900 border border-dashed border-red-500 rounded-lg">
                        <h3 class="font-bold text-lg text-red-400">A Voice in the Machine:</h3>
                        <p class="italic mt-1">Ghost's commentary appears in the main simulation console above.</p>
                    </div>
                </div>

                <div class="mt-8 text-center">
                    <button id="emailReportBtn" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        Generate Follow-up Email
                    </button>
                    <button id="downloadLogBtn" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg ml-4 transition-transform transform hover:scale-105">
                        Download Session Log (JSON)
                    </button>
                    <button id="replayBtn" class="bg-purple-600 hover:bg-purple-500 text-white font-bold py-2 px-4 rounded-lg ml-4 transition-transform transform hover:scale-105">
                        Replay Simulation
                    </button>
                </div>
            </section>
        </main>

        <footer role="contentinfo" class="text-center mt-16 text-gray-500 text-sm">
            <p>This was a simulation. These were not real choices.</p>
            <p class="mt-1">Lotus + Autonomy Theater Capstone Project</p>
        </footer>
    </div>

    <!-- 
    Modern ES Module Loading:
    All JavaScript logic is now initiated from app.js, which imports other modules as needed.
    This replaces the previous list of individual script tags.
    For this to work, you must move your existing JS files to their new locations
    and add `export` statements to the functions/classes you need to use in other files.
    -->
    <script type="module" src="app.js"></script>
</body>
</html>
