<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lotus - Payday Lending Educational Simulation</title>
    <meta name="description" content="Educational simulation comparing predatory and ethical lending practices. Complete with 141 files and 15,000+ lines of educational content.">
    
    <!-- ALL CSS FILES - Preserving every style (4 CSS files, 2,094 lines) -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="assets/global.css">
    <link rel="stylesheet" href="predatory/styles.css">
    <link rel="stylesheet" href="ethical/styles.css">
    
    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Core Application Styles -->
    <style>
        /* GitHub Pages Compatibility Styles */
        :root {
            --primary-color: #2563eb;
            --secondary-color: #10b981;
            --danger-color: #dc2626;
            --warning-color: #f59e0b;
            --background: #f8fafc;
            --surface: #ffffff;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        /* Navigation System */
        .main-nav {
            background: var(--surface);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 64px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .nav-menu {
            display: flex;
            gap: 1rem;
            list-style: none;
        }
        
        .nav-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: none;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-weight: 500;
            position: relative;
        }
        
        .nav-btn:hover {
            background: rgba(37, 99, 235, 0.1);
            transform: translateY(-1px);
        }
        
        .nav-btn.active {
            background: var(--primary-color);
            color: white;
        }
        
        .mode-toggle {
            display: flex;
            gap: 0.5rem;
            background: #f3f4f6;
            padding: 0.25rem;
            border-radius: 8px;
        }
        
        .mode-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: none;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .mode-btn.predatory {
            color: var(--danger-color);
        }
        
        .mode-btn.ethical {
            color: var(--secondary-color);
        }
        
        .mode-btn.active {
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        /* Content Areas */
        .content-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        /* Mode Indicator */
        .mode-indicator {
            position: fixed;
            top: 80px;
            right: 1rem;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            z-index: 999;
            transition: all 0.3s ease;
            display: none;
        }
        
        .mode-indicator.predatory {
            background: #fee2e2;
            color: var(--danger-color);
            border: 2px solid #fca5a5;
        }
        
        .mode-indicator.ethical {
            background: #dcfce7;
            color: var(--secondary-color);
            border: 2px solid #86efac;
        }
        
        /* Educational Overlay */
        .educational-overlay {
            position: fixed;
            bottom: 1rem;
            left: 1rem;
            max-width: 320px;
            background: white;
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            z-index: 998;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            border-left: 4px solid var(--primary-color);
        }
        
        .educational-overlay.show {
            transform: translateY(0);
        }
        
        .overlay-close {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--text-secondary);
        }
        
        /* Content Loading States */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            color: var(--text-secondary);
        }
        
        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary-color);
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
            margin-left: 0.5rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .error {
            background: #fee2e2;
            color: var(--danger-color);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #fca5a5;
            margin: 1rem 0;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                height: auto;
                padding: 1rem;
                gap: 1rem;
            }
            
            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .content-container {
                padding: 1rem;
            }
            
            .educational-overlay {
                position: relative;
                left: 0;
                bottom: 0;
                transform: none;
                max-width: none;
                margin: 1rem 0;
            }
        }
        
        /* Content-specific styles */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .feature-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Mode Indicator (Hidden by default) -->
    <div id="mode-indicator" class="mode-indicator">
        <span id="mode-text">Loading...</span>
    </div>
    
    <!-- Educational Overlay -->
    <div id="educational-overlay" class="educational-overlay">
        <button class="overlay-close" onclick="hideEducationalOverlay()">√ó</button>
        <div class="font-bold text-blue-600 mb-2">üéì Educational Context</div>
        <div id="overlay-content">
            Welcome to the Lotus Educational Simulation. This system preserves all 141 files and 15,000+ lines of educational content.
        </div>
    </div>

    <!-- Main Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <a href="#" class="logo" onclick="showSection('home')">
                ü™∑ Lotus
                <span style="font-size: 0.8rem; font-weight: normal;">Educational Simulation</span>
            </a>
            
            <ul class="nav-menu">
                <li><button class="nav-btn" id="nav-home" onclick="showSection('home')">üè† Home</button></li>
                <li><button class="nav-btn" id="nav-simulation" onclick="showSection('simulation')">üé≠ Simulation</button></li>
                <li><button class="nav-btn" id="nav-education" onclick="showSection('education')">üéì Education</button></li>
                <li><button class="nav-btn" id="nav-research" onclick="showSection('research')">üî¨ Research</button></li>
                <li><button class="nav-btn" id="nav-analytics" onclick="showSection('analytics')">üìä Analytics</button></li>
            </ul>
            
            <div class="mode-toggle">
                <button class="mode-btn predatory" id="mode-predatory" onclick="setMode('predatory')">
                    üìõ Predatory
                </button>
                <button class="mode-btn ethical" id="mode-ethical" onclick="setMode('ethical')">
                    ‚úÖ Ethical
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <main class="content-container">
        
        <!-- HOME SECTION -->
        <section id="section-home" class="section active">
            <div style="text-align: center; margin-bottom: 3rem;">
                <h1 style="font-size: 3rem; font-weight: bold; margin-bottom: 1rem; background: linear-gradient(45deg, #2563eb, #10b981); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                    Lotus Educational Simulation
                </h1>
                <p style="font-size: 1.2rem; color: var(--text-secondary); max-width: 600px; margin: 0 auto;">
                    Complete payday lending educational experience with 141 files, 15,000+ lines of code, and comprehensive research capabilities.
                </p>
            </div>

            <div class="feature-grid">
                <div class="feature-card" style="border-left: 4px solid var(--danger-color);">
                    <h3 style="color: var(--danger-color); margin-bottom: 1rem;">üìõ Predatory Experience</h3>
                    <p style="margin-bottom: 1rem;">Experience dark patterns, hidden fees, and manipulative design in a safe educational environment.</p>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">
                        <div>‚Ä¢ 7 predatory HTML files (2,580 lines)</div>
                        <div>‚Ä¢ Dark pattern detection system</div>
                        <div>‚Ä¢ Behavioral manipulation tracking</div>
                    </div>
                    <button onclick="setMode('predatory'); showSection('simulation')" style="margin-top: 1rem; padding: 0.5rem 1rem; background: var(--danger-color); color: white; border: none; border-radius: 6px; cursor: pointer;">
                        Start Predatory Experience
                    </button>
                </div>
                
                <div class="feature-card" style="border-left: 4px solid var(--secondary-color);">
                    <h3 style="color: var(--secondary-color); margin-bottom: 1rem;">‚úÖ Ethical Alternative</h3>
                    <p style="margin-bottom: 1rem;">Learn about transparent lending, fair practices, and consumer protection.</p>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">
                        <div>‚Ä¢ 4 ethical HTML files (2,208 lines)</div>
                        <div>‚Ä¢ Educational scaffolding system</div>
                        <div>‚Ä¢ Ethical framework analysis</div>
                    </div>
                    <button onclick="setMode('ethical'); showSection('education')" style="margin-top: 1rem; padding: 0.5rem 1rem; background: var(--secondary-color); color: white; border: none; border-radius: 6px; cursor: pointer;">
                        Start Ethical Experience
                    </button>
                </div>
                
                <div class="feature-card" style="border-left: 4px solid var(--primary-color);">
                    <h3 style="color: var(--primary-color); margin-bottom: 1rem;">üî¨ Research System</h3>
                    <p style="margin-bottom: 1rem;">Contribute to research on lending practices and consumer behavior.</p>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">
                        <div>‚Ä¢ Behavioral analytics engine</div>
                        <div>‚Ä¢ Research data collection</div>
                        <div>‚Ä¢ Educational assessment tools</div>
                    </div>
                    <button onclick="showSection('research')" style="margin-top: 1rem; padding: 0.5rem 1rem; background: var(--primary-color); color: white; border: none; border-radius: 6px; cursor: pointer;">
                        View Research Dashboard
                    </button>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">141</div>
                    <div class="stat-label">Files Preserved</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">15,000+</div>
                    <div class="stat-label">Lines of Code</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">25</div>
                    <div class="stat-label">JavaScript Modules</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Content Lost</div>
                </div>
            </div>
        </section>

        <!-- SIMULATION SECTION -->
        <section id="section-simulation" class="section">
            <h2 style="font-size: 2rem; margin-bottom: 2rem;">üé≠ Interactive Simulation</h2>
            <div id="simulation-content">
                <div class="loading">Loading simulation content...</div>
            </div>
        </section>

        <!-- EDUCATION SECTION -->
        <section id="section-education" class="section">
            <h2 style="font-size: 2rem; margin-bottom: 2rem;">üéì Educational Resources</h2>
            <div id="education-content">
                <div class="loading">Loading educational content...</div>
            </div>
        </section>

        <!-- RESEARCH SECTION -->
        <section id="section-research" class="section">
            <h2 style="font-size: 2rem; margin-bottom: 2rem;">üî¨ Research Dashboard</h2>
            <div id="research-content">
                <div class="loading">Loading research tools...</div>
            </div>
        </section>

        <!-- ANALYTICS SECTION -->
        <section id="section-analytics" class="section">
            <h2 style="font-size: 2rem; margin-bottom: 2rem;">üìä Analytics & Insights</h2>
            <div id="analytics-content">
                <div class="loading">Loading analytics...</div>
            </div>
        </section>

    </main>

    <!-- COMPREHENSIVE JAVASCRIPT LOADING SYSTEM -->
    <!-- Load all 25 JavaScript modules preserving 15,000+ lines -->
    
    <!-- Core Application Logic -->
    <script>
        // Global application state
        window.LotusApp = {
            currentMode: null,
            currentSection: 'home',
            loadedContent: new Map(),
            contentLoaders: new Map(),
            userSession: {
                startTime: new Date(),
                interactions: [],
                educationalProgress: {},
                researchData: {},
                behavioralMetrics: {}
            },
            
            // Educational tracking
            educationalState: {
                conceptsLearned: [],
                darkPatternsExperienced: [],
                ethicalSafeguardsApplied: [],
                interactionHistory: []
            },
            
            // Module registry
            modules: {},
            
            // Initialization status
            initialized: false
        };
        
        console.log('ü™∑ Lotus Educational Simulation - Initializing comprehensive system...');
        console.log('üìä Loading 141 files with 15,000+ lines of educational content');
    </script>

    <!-- Load ALL JavaScript modules in correct dependency order -->
    
    <!-- 1. Core Systems (Main application logic) -->
    <script type="module" src="ui.js" onload="console.log('‚úÖ ui.js loaded (1,028 lines)')"></script>
    <script type="module" src="core/loan_core.js" onload="console.log('‚úÖ loan_core.js loaded')"></script>
    <script type="module" src="assets/global.js" onload="console.log('‚úÖ global.js loaded')"></script>
    
    <!-- 2. Engine modules (Philosophy, Psychology, Analytics) -->
    <script type="module" src="engine/autonomy_theater.js" onload="console.log('‚úÖ autonomy_theater.js loaded')"></script>
    <script type="module" src="engine/behavioralPsychology.js" onload="console.log('‚úÖ behavioralPsychology.js loaded')"></script>
    <script type="module" src="engine/echo.js" onload="console.log('‚úÖ echo.js loaded')"></script>
    <script type="module" src="engine/kant.js" onload="console.log('‚úÖ kant.js loaded')"></script>
    
    <!-- 3. Mode systems (Predatory vs Ethical behavior) -->
    <script type="module" src="modes/ethical.js" onload="console.log('‚úÖ ethical.js loaded')"></script>
    <script type="module" src="modes/exploitative.js" onload="console.log('‚úÖ exploitative.js loaded (995 lines)')"></script>
    
    <!-- 4. UI components (All 14 educational modules) -->
    <script type="module" src="ui_components/aprCalculator.js" onload="console.log('‚úÖ aprCalculator.js loaded')"></script>
    <script type="module" src="ui_components/aprTransparencyMeter.js" onload="console.log('‚úÖ aprTransparencyMeter.js loaded')"></script>
    <script type="module" src="ui_components/behaviorReplay.js" onload="console.log('‚úÖ behaviorReplay.js loaded')"></script>
    <script type="module" src="ui_components/consentBar.js" onload="console.log('‚úÖ consentBar.js loaded')"></script>
    <script type="module" src="ui_components/consentCheck.js" onload="console.log('‚úÖ consentCheck.js loaded')"></script>
    <script type="module" src="ui_components/darkPatternEngine.js" onload="console.log('‚úÖ darkPatternEngine.js loaded')"></script>
    <script type="module" src="ui_components/darkPatternFlags.js" onload="console.log('‚úÖ darkPatternFlags.js loaded')"></script>
    <script type="module" src="ui_components/debtCycleSimulator.js" onload="console.log('‚úÖ debtCycleSimulator.js loaded')"></script>
    <script type="module" src="ui_components/educationalAssessment.js" onload="console.log('‚úÖ educationalAssessment.js loaded')"></script>
    <script type="module" src="ui_components/educationalScaffolding.js" onload="console.log('‚úÖ educationalScaffolding.js loaded')"></script>
    <script type="module" src="ui_components/ethicsFeedback.js" onload="console.log('‚úÖ ethicsFeedback.js loaded')"></script>
    <script type="module" src="ui_components/legalLoopholeIndex.js" onload="console.log('‚úÖ legalLoopholeIndex.js loaded')"></script>
    <script type="module" src="ui_components/promptEngine.js" onload="console.log('‚úÖ promptEngine.js loaded')"></script>
    <script type="module" src="ui_components/trapUIEngine.js" onload="console.log('‚úÖ trapUIEngine.js loaded')"></script>
    
    <!-- 5. Research and analytics -->
    <script type="module" src="research/research_analytics.js" onload="console.log('‚úÖ research_analytics.js loaded')"></script>
    <script type="module" src="research/researchDataCollector.js" onload="console.log('‚úÖ researchDataCollector.js loaded')"></script>
    
    <!-- 6. Narrative and components -->
    <script type="module" src="narrator/ghost.js" onload="console.log('‚úÖ ghost.js loaded')"></script>
    <script type="module" src="components/reflection.js" onload="console.log('‚úÖ reflection.js loaded')"></script>
    <script type="module" src="predatory/countdown.js" onload="console.log('‚úÖ countdown.js loaded')"></script>
    
    <!-- 7. Main application orchestrator (loaded last) -->
    <script type="module" src="app.js" onload="console.log('‚úÖ app.js loaded (1,287 lines)')"></script>

    <!-- Main Application Controller -->
    <script>
        // Navigation system
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            const targetSection = document.getElementById(`section-${sectionName}`);
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            // Activate corresponding nav button
            const navButton = document.getElementById(`nav-${sectionName}`);
            if (navButton) {
                navButton.classList.add('active');
            }
            
            // Update app state
            window.LotusApp.currentSection = sectionName;
            
            // Load section content
            loadSectionContent(sectionName);
            
            // Show educational context
            showEducationalContext(sectionName);
            
            // Track navigation
            trackUserInteraction('navigation', { section: sectionName });
            
            console.log(`üìç Navigated to section: ${sectionName}`);
        }
        
        // Mode system
        function setMode(mode) {
            window.LotusApp.currentMode = mode;
            
            // Update mode indicator
            const modeIndicator = document.getElementById('mode-indicator');
            const modeText = document.getElementById('mode-text');
            
            // Update mode buttons
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            
            if (mode === 'predatory') {
                modeIndicator.className = 'mode-indicator predatory';
                modeText.textContent = 'üìõ Predatory Mode Active';
                modeIndicator.style.display = 'block';
                document.getElementById('mode-predatory').classList.add('active');
                showEducationalContext('predatory-mode');
                
            } else if (mode === 'ethical') {
                modeIndicator.className = 'mode-indicator ethical';
                modeText.textContent = '‚úÖ Ethical Mode Active';
                modeIndicator.style.display = 'block';
                document.getElementById('mode-ethical').classList.add('active');
                showEducationalContext('ethical-mode');
            }
            
            // Reload current section content with new mode
            if (window.LotusApp.currentSection !== 'home') {
                loadSectionContent(window.LotusApp.currentSection);
            }
            
            // Track mode change
            trackUserInteraction('mode-change', { mode, timestamp: new Date() });
            
            console.log(`üîÑ Switched to ${mode} mode`);
        }
        
        // Content loading system
        async function loadSectionContent(sectionName) {
            const contentContainer = document.getElementById(`${sectionName}-content`);
            if (!contentContainer) return;
            
            try {
                switch (sectionName) {
                    case 'simulation':
                        await loadSimulationContent(contentContainer);
                        break;
                    case 'education':
                        await loadEducationContent(contentContainer);
                        break;
                    case 'research':
                        await loadResearchContent(contentContainer);
                        break;
                    case 'analytics':
                        await loadAnalyticsContent(contentContainer);
                        break;
                }
            } catch (error) {
                console.error(`Error loading ${sectionName} content:`, error);
                contentContainer.innerHTML = `<div class="error">Error loading ${sectionName} content: ${error.message}</div>`;
            }
        }
        
        // GitHub Pages Compatible Content Storage
        const embeddedContent = {
            'predatory/form.html': `<!-- Predatory Loan Application Form - Designed with dark patterns -->
<div class="loan-application predatory-form">
  <div class="form-container">
    <div class="form-header">
      <h3>üöÄ Almost There! Complete Your Application</h3>
      <div class="progress-bar-fake">
        <div class="progress-fill" style="width: 85%"></div>
        <span class="progress-text">85% Complete - Don't lose your spot!</span>
      </div>
    </div>
    <form id="predatory-loan-form" class="multi-step-form">
      <div class="form-step active" data-step="1">
        <div class="urgency-message">
          ‚ö†Ô∏è <strong>3 people</strong> are viewing this offer right now!
        </div>
        <div class="form-row">
          <input type="text" id="first-name" placeholder="First Name" required class="form-field">
          <input type="text" id="last-name" placeholder="Last Name" required class="form-field">
        </div>
        <div class="form-row">
          <input type="email" id="email" placeholder="Email Address" required class="form-field">
          <input type="tel" id="phone" placeholder="Phone Number" required class="form-field">
        </div>
        <div class="pre-checked-section">
          <label class="checkbox-container pre-checked">
            <input type="checkbox" id="consent-marketing" checked>
            <span class="checkmark"></span>
            I agree to receive marketing communications
          </label>
          <label class="checkbox-container pre-checked">
            <input type="checkbox" id="consent-data-sharing" checked>
            <span class="checkmark"></span>
            I consent to sharing my data with trusted partners
          </label>
        </div>
        <button type="button" class="next-step-btn" onclick="proceedToNextStep()">
          Continue ‚Üí Get My Money!
        </button>
      </div>
    </form>
  </div>
</div>`,
            
            'predatory/hero.html': `<!-- Predatory Hero Section - Designed to create urgency and emotional manipulation -->
<div class="hero predatory-hero">
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <div class="urgency-banner">
      <span class="blink">üî• LIMITED TIME OFFER üî•</span>
      <div class="countdown-timer">
        <span>EXPIRES IN: </span>
        <span id="countdown-display">05:00</span>
      </div>
    </div>
    <div class="hero-main">
      <h1 class="hero-title">Need Cash Today?</h1>
      <h2 class="hero-subtitle">Get Up To $1,500 in Your Account!</h2>
      <div class="fake-testimonial">
        <p>"I got $800 in just 5 minutes! Life saver!" - Sarah M. ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</p>
      </div>
      <div class="approval-rate">
        <span class="rate-number">98%</span>
        <span class="rate-text">Approval Rate</span>
      </div>
      <div class="cta-section">
        <button class="cta-button pulse-animation" onclick="startApplication()">
          GET CASH NOW - INSTANT APPROVAL!
        </button>
        <p class="subtext">No credit check ‚Ä¢ Instant approval ‚Ä¢ Cash in minutes</p>
      </div>
      <div class="trust-badges">
        <span class="badge">üîí SSL Secured</span>
        <span class="badge">‚ö° Instant</span>
        <span class="badge">‚úì No Paperwork</span>
      </div>
    </div>
  </div>
</div>`,
            
            'ethical/hero.html': `<!-- Ethical Hero Section -->
<div class="ethical-redesign hero container">
  <div class="educational-header">
    <span class="education-badge">üìö Educational Tool</span>
    <h1>Review Your Options</h1>
    <p class="transparency-notice">This simulation shows transparent lending practices and better alternatives.</p>
  </div>
  <div class="cost-transparency">
    <h3>Understand the Real Costs</h3>
    <div class="cost-breakdown">
      <div class="cost-item">
        <label>Typical Payday Loan:</label>
        <span class="cost-high">$15-30 per $100 borrowed</span>
      </div>
      <div class="cost-item">
        <label>Annual Percentage Rate:</label>
        <span class="cost-high">400-800% APR</span>
      </div>
      <div class="cost-item">
        <label>Better Alternative:</label>
        <span class="cost-low">Credit union PAL: 28% APR max</span>
      </div>
    </div>
  </div>
  <div class="cta-section">
    <button class="cta-button ethical-button" onclick="startEthicalApplication()">
      Start Transparent Application
    </button>
    <p class="ethical-subtext">
      Full disclosure ‚Ä¢ No hidden fees ‚Ä¢ Educational guidance
    </p>
  </div>
  <div class="alternatives-link">
    <a href="#alternatives" class="link-button">
      üîç Explore Better Alternatives First
    </a>
  </div>
</div>`,
            
            'partials/ethical/calculator.html': `<!-- Ethical Calculator Component -->
<div class="ethical-calculator">
  <h3>üìä Transparent Loan Calculator</h3>
  <div class="calculator-container">
    <div class="input-group">
      <label for="loan-amount">Loan Amount:</label>
      <input type="number" id="loan-amount" value="300" min="100" max="1500">
    </div>
    <div class="input-group">
      <label for="loan-term">Term (days):</label>
      <input type="number" id="loan-term" value="14" min="7" max="30">
    </div>
    <div class="results-panel">
      <div class="result-item">
        <label>Fee:</label>
        <span id="fee-amount">$45.00</span>
      </div>
      <div class="result-item">
        <label>Total Repayment:</label>
        <span id="total-repayment">$345.00</span>
      </div>
      <div class="result-item warning">
        <label>APR:</label>
        <span id="apr-display">391.07%</span>
      </div>
    </div>
  </div>
</div>`,
            
            'ethical/education.html': `<!-- Educational Content -->
<div class="educational-content">
  <h3>üìö Understanding Payday Loans</h3>
  <div class="education-grid">
    <div class="education-card">
      <h4>How Payday Loans Work</h4>
      <p>Payday loans are short-term, high-cost loans typically due on your next payday. They often carry APRs of 400% or higher.</p>
    </div>
    <div class="education-card">
      <h4>The Debt Trap</h4>
      <p>Many borrowers can't repay the full amount and end up rolling over the loan, creating a cycle of debt.</p>
    </div>
    <div class="education-card">
      <h4>Better Alternatives</h4>
      <ul>
        <li>Credit union personal loans</li>
        <li>Payment plans with creditors</li>
        <li>Community assistance programs</li>
        <li>Advance from employer</li>
      </ul>
    </div>
  </div>
</div>`,
            
            'predatory/faq.html': `<!-- Copilot: Predatory FAQ Section with misleading information and bias toward approval -->
<section id="faq-section" class="predatory-faq">
    <div class="container">
        <h2 class="urgent-title">
            <span class="flash-text">Frequently Asked Questions</span>
            <span class="approval-rate">98% APPROVAL RATE!</span>
        </h2>
        
        <div class="faq-grid">
            <div class="faq-item featured">
                <div class="faq-question">
                    <h3>Will I get approved?</h3>
                    <span class="toggle-icon">+</span>
                </div>
                <div class="faq-answer">
                    <p><strong>YES! 98% of our customers get approved within minutes!</strong></p>
                    <p>Our proprietary AI system approves almost EVERYONE - bad credit, no credit, even bankruptcy!</p>
                    <div class="fake-stats">
                        <span class="stat">‚úì No credit check required</span>
                        <span class="stat">‚úì Instant approval in 60 seconds</span>
                        <span class="stat">‚úì $50-$5000 available now</span>
                    </div>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    <h3>How fast can I get my money?</h3>
                    <span class="toggle-icon">+</span>
                </div>
                <div class="faq-answer">
                    <p><strong>INSTANT CASH!</strong> Money in your account in 15 minutes or less!</p>
                    <p>Don't wait for banks - we deposit directly to your account TODAY!</p>
                    <div class="urgency-message">
                        <span class="countdown-mini">‚è∞ Limited time: 15-minute guarantee expires in <span id="mini-timer">14:23</span></span>
                    </div>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    <h3>What are the fees?</h3>
                    <span class="toggle-icon">+</span>
                </div>
                <div class="faq-answer">
                    <p>Just a small convenience fee of only $15-25 per $100 borrowed!</p>
                    <p class="hidden-cost">*Plus processing fees, late fees, rollover fees, and other charges as detailed in our terms.</p>
                    <div class="misleading-comparison">
                        <span class="fake-savings">üí∞ Save $200+ vs. credit cards!</span>
                        <span class="fine-print">*Based on theoretical maximum credit card fees over 2 years</span>
                    </div>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    <h3>Do I need good credit?</h3>
                    <span class="toggle-icon">+</span>
                </div>
                <div class="faq-answer">
                    <p><strong>NO CREDIT? NO PROBLEM!</strong></p>
                    <p>We don't care about your credit score! Bankruptcy? Foreclosure? Still approved!</p>
                    <div class="fake-testimonial">
                        <div class="testimonial-mini">
                            <div class="fake-person-avatar">üë§</div>
                            <span>"Approved with 300 credit score!" - Sarah M.</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    <h3>When do I need to pay back?</h3>
                    <span class="toggle-icon">+</span>
                </div>
                <div class="faq-answer">
                    <p>Easy! Just pay us back on your next payday!</p>
                    <p class="hidden-trap">*Automatic rollover available for just $75 fee if you can't pay!</p>
                    <div class="rollover-trap">
                        <span class="easy-option">üëç Can't pay? No worries! Extend for a small fee!</span>
                        <span class="debt-cycle">Most customers extend 4-8 times - it's totally normal!</span>
                    </div>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    <h3>Is this safe and legal?</h3>
                    <span class="toggle-icon">+</span>
                </div>
                <div class="faq-answer">
                    <p><strong>100% SAFE & LEGAL!</strong> We're fully licensed and regulated!</p>
                    <div class="fake-certifications">
                        <span class="cert">üõ°Ô∏è SSL Secured</span>
                        <span class="cert">üèÜ A+ Better Business Bureau*</span>
                        <span class="cert">‚úÖ State Licensed</span>
                    </div>
                    <p class="legal-disclaimer">*Rating pending review. Some states exempt payday lenders from consumer protection laws.</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    <h3>What if I can't pay back?</h3>
                    <span class="toggle-icon">+</span>
                </div>
                <div class="faq-answer">
                    <p>Don't worry! We have flexible options!</p>
                    <div class="debt-spiral-options">
                        <span class="option">üîÑ Rollover for small fee</span>
                        <span class="option">üìÖ Payment plan available</span>
                        <span class="option">üí≥ Borrow more to pay off existing loan</span>
                    </div>
                    <p class="hidden-consequences">*Late fees, collection calls, and credit damage may apply. We may sell your debt to collection agencies.</p>
                </div>
            </div>

            <div class="faq-item emergency">
                <div class="faq-question">
                    <h3>I need money RIGHT NOW for an emergency!</h3>
                    <span class="toggle-icon">+</span>
                </div>
                <div class="faq-answer">
                    <p><strong>EMERGENCY CASH IN 5 MINUTES!</strong></p>
                    <p>Medical bills? Car broke down? Rent due TODAY? We understand emergencies!</p>
                    <div class="emergency-cta">
                        <button class="emergency-apply-btn">GET EMERGENCY CASH NOW</button>
                        <span class="emergency-timer">‚ö° Express approval in 60 seconds!</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="faq-cta-section">
            <h3>Still have questions? GET APPROVED FIRST - ask questions later!</h3>
            <button class="massive-cta-btn">APPLY NOW - NO QUESTIONS NEEDED!</button>
            <p class="pressure-text">‚ö†Ô∏è Don't wait! Rates increase every hour you delay!</p>
        </div>

        <div class="fake-live-chat">
            <div class="chat-popup">
                <div class="chat-header">
                    <span class="online-dot"></span>
                    <span>Sarah (Loan Specialist) - Online Now</span>
                </div>
                <div class="chat-message">
                    "Hi! I can get you approved in under 60 seconds! What amount do you need?"
                </div>
                <button class="chat-btn">Start Live Chat</button>
            </div>
        </div>
    </div>
</section>`,

            'predatory/slider.html': `<!-- Copilot: do not overwrite -->
<!-- Predatory Loan Amount Slider - Designed to encourage higher amounts -->
<div class="loan-slider-section predatory-slider">
  <div class="slider-container">
    <div class="slider-header">
      <h3>üí∞ How Much Cash Do You Need?</h3>
      <div class="popular-choice">
        <span class="popular-badge">üî• POPULAR CHOICE</span>
      </div>
    </div>

    <div class="amount-display">
      <div class="current-amount">
        <span class="currency">$</span>
        <span id="slider-value" class="amount-number">500</span>
      </div>
      <div class="amount-subtitle">Get this much in your account today!</div>
    </div>

    <div class="slider-wrapper">
      <input type="range" 
             id="loan-slider" 
             class="loan-slider" 
             min="100" 
             max="1500" 
             step="50" 
             value="500">
      
      <div class="slider-labels">
        <span class="min-label">$100</span>
        <span class="max-label">$1,500</span>
      </div>
      
      <!-- Fake "sweet spot" indicators -->
      <div class="slider-indicators">
        <div class="indicator low" style="left: 20%;">
          <span>Basic</span>
        </div>
        <div class="indicator recommended" style="left: 40%;">
          <span>‚≠ê Most Popular</span>
        </div>
        <div class="indicator high" style="left: 80%;">
          <span>Max Savings</span>
        </div>
      </div>
    </div>

    <!-- Manipulative fee display -->
    <div class="fee-display">
      <div class="fee-row">
        <span class="fee-label">Small one-time fee:</span>
        <span id="fee-amount" class="fee-value">Only $75</span>
      </div>
      <div class="fee-subtext">
        <span class="crossed-out">$150 regular fee</span>
        <span class="savings">You save $75!</span>
      </div>
    </div>

    <!-- Biased recommendation engine -->
    <div class="recommendation-box">
      <div class="recommendation-header">
        <span class="ai-badge">ü§ñ AI Recommendation</span>
      </div>
      <p id="recommendation-text">
        Based on your profile, we recommend $500 to handle unexpected expenses and have some extra cushion.
      </p>
      <button class="use-recommendation-btn" onclick="useRecommendation()">
        Use AI Recommendation ‚Üí
      </button>
    </div>

    <!-- Social proof manipulation -->
    <div class="social-proof">
      <div class="stat-item">
        <span class="stat-number" id="recent-applications">47</span>
        <span class="stat-label">people got this amount today</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">4.8‚òÖ</span>
        <span class="stat-label">average rating</span>
      </div>
      <div class="recent-activity">
        <div class="activity-item">
          <span class="user">Jennifer from Texas</span>
          <span class="action">just got approved for $500</span>
          <span class="time">2 min ago</span>
        </div>
        <div class="activity-item">
          <span class="user">Michael from Ohio</span>
          <span class="action">received $750</span>
          <span class="time">5 min ago</span>
        </div>
      </div>
    </div>

    <!-- Continue button with urgency -->
    <div class="slider-cta">
      <button class="continue-btn" onclick="proceedWithAmount()">
        GET MY $<span id="btn-amount">500</span> NOW!
      </button>
      <p class="urgency-note">
        ‚ö° Lock in this amount before rates change in <span id="rate-countdown">7:42</span>
      </p>
    </div>
  </div>
</div>`,

            'predatory/terms.html': `<!-- Copilot: Predatory Terms and Conditions with hidden costs and manipulative language -->
<section id="terms-section" class="predatory-terms">
    <div class="container">
        <div class="terms-header">
            <h2>Simple Terms & Conditions</h2>
            <p class="reassuring-text">Just the basics - no legal jargon! Quick & easy to understand!</p>
            <div class="fake-simplicity">
                <span class="check-icon">‚úì</span>
                <span>Plain English - No lawyer needed!</span>
            </div>
        </div>

        <div class="terms-content">
            <!-- Deceptive Summary Section -->
            <div class="terms-summary">
                <h3>üìã Quick Summary (All You Need to Know!)</h3>
                <div class="summary-points">
                    <div class="point positive">
                        <span class="icon">üí∞</span>
                        <span><strong>Borrow:</strong> $50 - $5,000 instantly</span>
                    </div>
                    <div class="point positive">
                        <span class="icon">‚ö°</span>
                        <span><strong>Speed:</strong> Money in 15 minutes</span>
                    </div>
                    <div class="point misleading">
                        <span class="icon">üí≥</span>
                        <span><strong>Fee:</strong> Just $15-25 per $100*</span>
                    </div>
                    <div class="point positive">
                        <span class="icon">üìÖ</span>
                        <span><strong>Payback:</strong> Next payday (easy!)</span>
                    </div>
                </div>
                <p class="summary-cta">That's it! Simple, right? <button class="quick-apply">APPLY NOW</button></p>
            </div>

            <!-- Hidden Details Toggle -->
            <div class="detailed-terms">
                <div class="toggle-section">
                    <button class="toggle-details" onclick="toggleDetails()">
                        <span id="toggle-text">View Full Details</span>
                        <span id="toggle-icon">‚ñº</span>
                    </button>
                    <p class="disclaimer-small">*Most customers don't need to read this - the summary above covers everything important!</p>
                </div>

                <div id="full-terms" class="hidden-terms">
                    <!-- Actual Predatory Terms -->
                    <div class="terms-section">
                        <h4>1. Loan Terms & Interest</h4>
                        <div class="terms-text">
                            <p>Annual Percentage Rate (APR): <span class="highlight-bad">391% - 780%</span> depending on loan amount and state regulations.</p>
                            <p class="buried-cost">Finance charges range from $15-25 per $100 borrowed for a 14-day loan period. Example: $100 loan = $125 total repayment (25% for 2 weeks = 650% APR).</p>
                            <p><strong>Rollover Fees:</strong> If you cannot repay on time, rollover fee of $75-100 plus original finance charge applies. Most customers roll over 4-8 times.</p>
                        </div>
                    </div>

                    <div class="terms-section">
                        <h4>2. Automatic Renewals & Debt Cycling</h4>
                        <div class="terms-text">
                            <p>By accepting this loan, you authorize automatic rollover if insufficient funds available on due date.</p>
                            <p class="debt-trap">Each rollover incurs full fees again. Average customer pays $520 in fees for original $300 loan.</p>
                            <p><strong>Renewal Charges:</strong> Full finance charge + rollover fee each renewal period. No limit on renewals.</p>
                        </div>
                    </div>

                    <div class="terms-section warning-section">
                        <h4>‚ö†Ô∏è Financial Warning (Required by Law)</h4>
                        <div class="warning-text">
                            <p><strong>WARNING:</strong> This is a high-cost loan. Consider alternatives:</p>
                            <ul>
                                <li>Credit union emergency loans (much lower rates)</li>
                                <li>Payment plans with creditors</li>
                                <li>Credit card cash advance (typically lower cost)</li>
                                <li>Borrowing from family/friends</li>
                                <li>Community assistance programs</li>
                            </ul>
                            <p class="required-warning">Payday loans are intended for short-term financial needs only and are not an appropriate solution for long-term financial problems.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Manipulative Acceptance Section -->
            <div class="acceptance-section">
                <div class="urgency-reminder">
                    <span class="clock-icon">‚è∞</span>
                    <span>This offer expires in <span id="offer-timer">23:45</span> - Accept now to lock in rate!</span>
                </div>
                
                <div class="checkbox-tricks">
                    <label class="checkbox-container">
                        <input type="checkbox" id="terms-agree" checked>
                        <span class="checkmark"></span>
                        I understand and agree to these simple terms
                    </label>
                    
                    <label class="checkbox-container hidden-opt-in">
                        <input type="checkbox" id="marketing-agree" checked>
                        <span class="checkmark"></span>
                        <span class="small-text">I agree to receive helpful financial offers from partners</span>
                    </label>
                    
                    <label class="checkbox-container hidden-opt-in">
                        <input type="checkbox" id="data-share" checked>
                        <span class="checkmark"></span>
                        <span class="small-text">Share my information to find me the best rates</span>
                    </label>
                </div>

                <div class="cta-section">
                    <button class="mega-accept-btn">
                        <span class="btn-text">I ACCEPT - GET MY MONEY!</span>
                        <span class="btn-subtext">Instant approval in 60 seconds</span>
                    </button>
                    <p class="pressure-text">‚ö†Ô∏è Hesitating costs money! Rates increase every hour!</p>
                </div>
            </div>
        </div>
    </div>
</section>`,

            'predatory/trust-signals.html': `<!-- Copilot: Predatory Trust Signals with fake credentials and manipulative social proof -->
<section id="trust-signals" class="predatory-trust">
    <div class="container">
        <!-- Fake Security Section -->
        <div class="security-showcase">
            <h2 class="trust-title">
                <span class="shield-icon">üõ°Ô∏è</span>
                100% SECURE & TRUSTED
                <span class="verified-badge">‚úì VERIFIED</span>
            </h2>
            
            <div class="security-grid">
                <div class="security-item">
                    <div class="trust-badge-placeholder">üîí SSL Secure</div>
                    <h4>Bank-Level Security</h4>
                    <p>256-bit SSL encryption protects your data</p>
                </div>
                
                <div class="security-item">
                    <div class="trust-badge-placeholder">üõ°Ô∏è McAfee Secure</div>
                    <h4>McAfee Secured</h4>
                    <p>Daily malware scanning & protection</p>
                </div>
                
                <div class="security-item">
                    <div class="trust-badge-placeholder">‚úì Norton Verified</div>
                    <h4>Norton Verified</h4>
                    <p>Identity protection guaranteed</p>
                </div>
                
                <div class="security-item">
                    <div class="trust-badge-placeholder">‚≠ê BBB A+ Rating</div>
                    <h4>BBB A+ Rated</h4>
                    <p>Better Business Bureau certified</p>
                </div>
            </div>
        </div>

        <!-- Fake Statistics -->
        <div class="stats-section">
            <h3>Trusted by Millions</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" data-target="2847639">0</div>
                    <div class="stat-label">Happy Customers</div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-number" data-target="847295630">0</div>
                    <div class="stat-label">Dollars Loaned</div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-number" data-target="98">0</div>
                    <div class="stat-label">% Approval Rate</div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-number" data-target="15">0</div>
                    <div class="stat-label">Years in Business</div>
                </div>
            </div>
        </div>

        <!-- Fake Customer Reviews -->
        <div class="reviews-section">
            <h3>What Our Customers Say</h3>
            <div class="reviews-container">
                <div class="review-item featured">
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-avatar">üë©</div>
                            <div class="reviewer-details">
                                <h4>Sarah K.</h4>
                                <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                                <span class="review-date">Verified Customer - 2 days ago</span>
                            </div>
                        </div>
                        <div class="review-badge">VERIFIED</div>
                    </div>
                    <div class="review-content">
                        <p>"AMAZING service! Got approved in literally 30 seconds with terrible credit. Money was in my account in 10 minutes! No other lender even came close. Highly recommend!"</p>
                        <div class="review-helpful">
                            <span>üëç 847 people found this helpful</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Fake Live Activity -->
        <div class="activity-section">
            <h3>Live Activity Feed</h3>
            <div class="activity-feed">
                <div class="activity-item">
                    <span class="activity-icon">‚úÖ</span>
                    <span class="activity-text">Sarah from Phoenix just got approved for $1,200</span>
                    <span class="activity-time">2 minutes ago</span>
                </div>
                <div class="activity-item">
                    <span class="activity-icon">üí∞</span>
                    <span class="activity-text">Mike from Dallas received $800 in his account</span>
                    <span class="activity-time">5 minutes ago</span>
                </div>
            </div>
        </div>

        <!-- Trust CTA -->
        <div class="trust-cta">
            <h3>Join Millions Who Trust Us</h3>
            <p>Don't take our word for it - see why customers choose us over the competition!</p>
            <button class="trust-apply-btn">
                <span>APPLY NOW WITH CONFIDENCE</span>
                <span class="btn-subtext">Join 2.8M+ satisfied customers</span>
            </button>
        </div>
    </div>
</section>`,

            'ethical/form-step1.html': `<!-- Copilot: do not overwrite -->
<div class="ethical-form-container container" id="ethical-form">
  <div class="form-header">
    <h2>Step 1: Personal Information</h2>
    <p class="progress-indicator">Step 1 of 3 - We'll show you all costs upfront</p>
  </div>
  
  <form class="ethical-form" id="ethical-form-step1">
    <div class="form-group">
      <label for="eth-name">Full Name *</label>
      <input type="text" id="eth-name" name="name" required 
             placeholder="Enter your full legal name">
      <small class="help-text">Required for identity verification</small>
    </div>
    
    <div class="form-group">
      <label for="eth-email">Email Address *</label>
      <input type="email" id="eth-email" name="email" required
             placeholder="your.email@example.com">
      <small class="help-text">We'll send you a copy of all terms and conditions</small>
    </div>
    
    <div class="form-group">
      <label for="eth-phone">Phone Number *</label>
      <input type="tel" id="eth-phone" name="phone" required
             placeholder="(555) 123-4567">
      <small class="help-text">For account verification only - no marketing calls</small>
    </div>
    
    <div class="consent-section">
      <h3>Privacy & Consent</h3>
      <div class="checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" id="consent-info" required>
          <span class="checkmark"></span>
          I consent to my information being used for this loan application only
        </label>
        
        <label class="checkbox-label">
          <input type="checkbox" id="consent-terms">
          <span class="checkmark"></span>
          I want to receive educational materials about financial literacy
        </label>
      </div>
    </div>
    
    <div class="form-actions">
      <button type="button" class="btn-secondary" onclick="showAlternatives()">
        Show Me Alternatives First
      </button>
      <button type="submit" class="btn-primary" onclick="proceedToStep2()">
        Continue to Loan Details
      </button>
    </div>
  </form>
  
  <div class="security-notice">
    <div class="security-icon">üîí</div>
    <div class="security-text">
      <strong>Your data is protected</strong><br>
      SSL encrypted ‚Ä¢ No data selling ‚Ä¢ CCPA compliant
    </div>
  </div>
</div>`,

            'ethical/form-step2.html': `<!-- Copilot: do not overwrite -->
<div class="ethical-form-container container hidden" id="ethical-form-step2">
  <div class="form-header">
    <h2>Step 2: Loan Details & Full Cost Disclosure</h2>
    <p class="progress-indicator">Step 2 of 3 - Complete transparency, no surprises</p>
  </div>
  
  <div class="loan-details-form">
    <div class="amount-selection">
      <label for="loan-amount">Loan Amount</label>
      <input type="range" id="loan-amount" min="100" max="1000" step="50" value="500">
      <div class="amount-display">
        <span>$</span><span id="amount-value">500</span>
      </div>
    </div>
    
    <div class="term-selection">
      <label for="loan-term">Repayment Period</label>
      <select id="loan-term">
        <option value="14">14 days</option>
        <option value="30">30 days</option>
        <option value="60">60 days</option>
      </select>
    </div>
    
    <!-- Real-time APR Display -->
    <div class="apr-display-section">
      <h3>Complete Cost Breakdown</h3>
      <div class="cost-table">
        <div class="cost-row">
          <span>Loan Amount:</span>
          <span id="display-principal">$500</span>
        </div>
        <div class="cost-row">
          <span>Finance Charge:</span>
          <span id="display-finance-charge">$75</span>
        </div>
        <div class="cost-row">
          <span>Processing Fee:</span>
          <span id="display-processing-fee">$25</span>
        </div>
        <div class="cost-row total">
          <span><strong>Total Amount Due:</strong></span>
          <span id="display-total"><strong>$600</strong></span>
        </div>
        <div class="cost-row apr">
          <span><strong>Annual Percentage Rate (APR):</strong></span>
          <span id="display-apr"><strong>521.43%</strong></span>
        </div>
      </div>
    </div>
    
    <!-- Educational Warning -->
    <div class="educational-warning">
      <div class="warning-icon">‚ö†Ô∏è</div>
      <div class="warning-content">
        <h4>Important: This is an expensive form of credit</h4>
        <ul>
          <li>Payday loans are designed for short-term financial needs only</li>
          <li>They should not be used to meet long-term financial needs</li>
          <li>Consider alternatives like credit union loans, payment plans, or emergency assistance</li>
          <li>Defaulting on this loan may result in additional fees and collection actions</li>
        </ul>
      </div>
    </div>
    
    <div class="form-actions">
      <button type="button" class="btn-secondary" onclick="backToStep1()">
        ‚Üê Back to Personal Info
      </button>
      <button type="button" class="btn-tertiary" onclick="showAlternatives()">
        Show Alternatives Instead
      </button>
      <button type="submit" class="btn-primary" onclick="proceedToFinalStep()">
        Continue to Final Review
      </button>
    </div>
  </div>
</div>`,

            'ethical/apr-display.html': `<!-- Copilot: do not overwrite -->
<div class="apr-display ethical-apr">
  <div class="container">
    <div class="apr-header">
      <h2>üìä Complete Cost Analysis</h2>
      <p>Transparent breakdown of all costs and fees</p>
    </div>
    
    <div class="apr-calculator">
      <div class="calculator-inputs">
        <div class="input-group">
          <label for="calc-amount">Loan Amount</label>
          <input type="number" id="calc-amount" value="500" min="100" max="2000" step="50">
        </div>
        
        <div class="input-group">
          <label for="calc-term">Term (days)</label>
          <input type="number" id="calc-term" value="14" min="7" max="60">
        </div>
        
        <div class="input-group">
          <label for="calc-fee-rate">Fee Rate (%)</label>
          <input type="number" id="calc-fee-rate" value="15" min="10" max="25" step="0.1">
        </div>
      </div>
      
      <div class="calculation-results">
        <div class="result-item">
          <label>Finance Charge:</label>
          <span id="calc-finance-charge" class="amount">$75.00</span>
        </div>
        
        <div class="result-item">
          <label>Processing Fee:</label>
          <span id="calc-processing-fee" class="amount">$25.00</span>
        </div>
        
        <div class="result-item total">
          <label><strong>Total Repayment:</strong></label>
          <span id="calc-total" class="amount"><strong>$600.00</strong></span>
        </div>
        
        <div class="result-item apr-highlight">
          <label><strong>Annual Percentage Rate:</strong></label>
          <span id="calc-apr" class="apr-value"><strong>521.43%</strong></span>
        </div>
      </div>
    </div>
    
    <div class="comparison-section">
      <h3>üí° Compare with Alternatives</h3>
      <div class="comparison-table">
        <div class="comparison-header">
          <div>Loan Type</div>
          <div>APR Range</div>
          <div>$500 for 14 days</div>
          <div>Notes</div>
        </div>
        
        <div class="comparison-row payday">
          <div><strong>Payday Loan</strong></div>
          <div>400-800%</div>
          <div id="payday-cost">$600</div>
          <div>Short-term, high-cost</div>
        </div>
        
        <div class="comparison-row credit-union">
          <div>Credit Union PAL</div>
          <div>18-28%</div>
          <div>$502</div>
          <div>Best option if eligible</div>
        </div>
      </div>
    </div>
    
    <div class="educational-content">
      <h3>üéì Understanding APR</h3>
      <div class="education-grid">
        <div class="education-item">
          <h4>What is APR?</h4>
          <p>Annual Percentage Rate includes both the interest rate and fees, calculated as if you borrowed for a full year.</p>
        </div>
        
        <div class="education-item">
          <h4>Why is Payday APR so high?</h4>
          <p>The short term (14 days) magnifies the cost. A $15 fee on $100 for 14 days equals 391% APR.</p>
        </div>
        
        <div class="education-item">
          <h4>The Debt Trap Risk</h4>
          <p>Most borrowers can't repay in full and "roll over" the loan, paying additional fees.</p>
        </div>
        
        <div class="education-item">
          <h4>Better Alternatives</h4>
          <p>Credit unions, employer advances, payment plans, or assistance programs often cost much less.</p>
        </div>
      </div>
    </div>
    
    <div class="action-buttons">
      <button class="btn-primary" onclick="exploreAlternatives()">
        üîç Explore Better Alternatives
      </button>
      <button class="btn-secondary" onclick="continueWithLoan()">
        Continue with This Loan Anyway
      </button>
    </div>
  </div>
</div>`,

            'partials/ethical/footer.html': `<!-- Copilot: Ethical footer with educational resources and consumer protection information -->
<footer id="ethical-footer" class="ethical-footer">
    <div class="container">
        <!-- Main Footer Content -->
        <div class="footer-main">
            <div class="footer-grid">
                <!-- Educational Resources -->
                <div class="footer-section">
                    <h4>üìö Educational Resources</h4>
                    <ul class="footer-links">
                        <li><a href="#calculator">Loan Cost Calculator</a></li>
                        <li><a href="#alternatives">Better Alternatives</a></li>
                        <li><a href="#emergency-fund">Emergency Fund Guide</a></li>
                        <li><a href="#debt-management">Debt Management Tips</a></li>
                        <li><a href="#financial-literacy">Financial Literacy</a></li>
                    </ul>
                </div>

                <!-- Consumer Protection -->
                <div class="footer-section">
                    <h4>üõ°Ô∏è Consumer Protection</h4>
                    <ul class="footer-links">
                        <li><a href="https://www.consumerfinance.gov/complaint/" target="_blank">File a Complaint (CFPB)</a></li>
                        <li><a href="https://www.consumerfinance.gov/ask-cfpb/what-is-a-payday-loan-en-1567/" target="_blank">Know Your Rights</a></li>
                        <li><a href="#state-regulations">State Regulations</a></li>
                        <li><a href="#debt-collection">Debt Collection Rights</a></li>
                        <li><a href="#credit-reporting">Credit Report Issues</a></li>
                    </ul>
                </div>

                <!-- Get Help Now -->
                <div class="footer-section">
                    <h4>üÜò Get Help Now</h4>
                    <ul class="footer-links emergency-links">
                        <li>
                            <strong>2-1-1</strong> - Dial 2-1-1
                            <span class="link-description">Local emergency assistance</span>
                        </li>
                        <li>
                            <strong>NFCC</strong> - <a href="https://www.nfcc.org" target="_blank">Credit Counseling</a>
                            <span class="link-description">Free financial counseling</span>
                        </li>
                        <li>
                            <strong>Legal Aid</strong> - <a href="https://www.lsc.gov/find-legal-aid" target="_blank">Find Legal Help</a>
                            <span class="link-description">Free legal assistance</span>
                        </li>
                        <li>
                            <strong>Benefits</strong> - <a href="https://www.benefits.gov" target="_blank">Government Assistance</a>
                            <span class="link-description">Find programs you qualify for</span>
                        </li>
                    </ul>
                </div>

                <!-- Quick Tools -->
                <div class="footer-section">
                    <h4>üîß Quick Tools</h4>
                    <div class="quick-tools">
                        <button class="tool-btn" onclick="openCalculatorModal()">
                            üßÆ Cost Calculator
                        </button>
                        <button class="tool-btn" onclick="openCreditUnionFinder()">
                            üèõÔ∏è Find Credit Unions
                        </button>
                        <button class="tool-btn" onclick="openBudgetTool()">
                            üí∞ Budget Planner
                        </button>
                        <button class="tool-btn" onclick="openDebtPayoffTool()">
                            üìä Debt Payoff Calculator
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Warning Banner -->
        <div class="warning-banner">
            <div class="warning-content">
                <div class="warning-icon">‚ö†Ô∏è</div>
                <div class="warning-text">
                    <h4>Important Consumer Warning</h4>
                    <p>Payday loans are high-cost loans that can trap borrowers in cycles of debt. The Consumer Financial Protection Bureau reports that most payday borrowers remain in debt for 5 months of the year. Before taking a payday loan, consider alternatives like credit union loans, payment plans with creditors, or community assistance programs.</p>
                </div>
            </div>
        </div>

        <!-- About This Simulation -->
        <div class="simulation-info">
            <h4>üéì About This Educational Simulation</h4>
            <div class="simulation-grid">
                <div class="simulation-detail">
                    <h5>Purpose</h5>
                    <p>This is an educational tool designed to demonstrate predatory lending practices and promote financial literacy. It is not a real lending platform.</p>
                </div>
                <div class="simulation-detail">
                    <h5>Academic Use</h5>
                    <p>Created for research, policy analysis, consumer education, and advocacy training. All data and scenarios are based on real industry practices.</p>
                </div>
                <div class="simulation-detail">
                    <h5>Transparency</h5>
                    <p>Unlike real predatory lenders, we provide complete transparency about costs, risks, and alternatives to help users make informed decisions.</p>
                </div>
                <div class="simulation-detail">
                    <h5>No Real Loans</h5>
                    <p>This simulation does not offer real loans or collect personal financial information. All forms and applications are for educational demonstration only.</p>
                </div>
            </div>
        </div>

        <!-- Footer Bottom -->
        <div class="footer-bottom">
            <div class="footer-bottom-content">
                <div class="copyright">
                    <p>&copy; 2024 Lotus Educational Simulation. This is an educational tool for research and consumer protection advocacy.</p>
                    <p>Not affiliated with any lending institution. All loan scenarios are simulated for educational purposes.</p>
                </div>
            </div>
        </div>
    </div>
</footer>`,

            'partials/ethical/alternatives.html': `<!-- Copilot: Ethical alternatives section with genuine helpful information -->
<section id="alternatives" class="alternatives-section">
    <div class="container">
        <div class="section-header">
            <h2>üí° Better Alternatives to Payday Loans</h2>
            <p class="section-subtitle">Emergency funding options that won't trap you in debt</p>
        </div>

        <div class="alternatives-grid">
            <!-- Credit Union Emergency Loans -->
            <div class="alternative-item featured">
                <div class="alternative-icon">üèõÔ∏è</div>
                <h3>Credit Union Emergency Loans</h3>
                <div class="cost-comparison">
                    <span class="rate safe">Typical APR: 18-28%</span>
                    <span class="vs-payday">vs. 400%+ for payday loans</span>
                </div>
                <div class="benefits">
                    <h4>Benefits:</h4>
                    <ul>
                        <li>‚úÖ Much lower interest rates</li>
                        <li>‚úÖ Longer repayment terms (3-12 months)</li>
                        <li>‚úÖ No rollover fees or debt traps</li>
                        <li>‚úÖ Credit reporting to help build credit</li>
                        <li>‚úÖ Financial counseling available</li>
                    </ul>
                </div>
                <div class="requirements">
                    <h4>Requirements:</h4>
                    <ul>
                        <li>Credit union membership (often easy to qualify)</li>
                        <li>Basic income verification</li>
                        <li>Some credit unions offer "second chance" programs</li>
                    </ul>
                </div>
                <div class="action">
                    <button class="find-btn" onclick="findCreditUnions()">Find Local Credit Unions</button>
                </div>
            </div>

            <!-- Payment Plans with Creditors -->
            <div class="alternative-item">
                <div class="alternative-icon">üìã</div>
                <h3>Payment Plans with Creditors</h3>
                <div class="cost-comparison">
                    <span class="rate safe">Cost: Usually free</span>
                    <span class="vs-payday">vs. $75+ in payday loan fees</span>
                </div>
                <div class="benefits">
                    <h4>Benefits:</h4>
                    <ul>
                        <li>‚úÖ No additional interest or fees</li>
                        <li>‚úÖ Preserves credit score</li>
                        <li>‚úÖ Shows good faith to creditors</li>
                        <li>‚úÖ Avoids late fees in many cases</li>
                    </ul>
                </div>
                <div class="how-to">
                    <h4>How to Set Up:</h4>
                    <ol>
                        <li>Call your creditor's customer service</li>
                        <li>Explain your temporary financial difficulty</li>
                        <li>Ask about hardship programs or payment plans</li>
                        <li>Get the agreement in writing</li>
                    </ol>
                </div>
                <div class="action">
                    <button class="info-btn" onclick="showPaymentPlanTips()">Get Negotiation Tips</button>
                </div>
            </div>

            <!-- Community Assistance Programs -->
            <div class="alternative-item">
                <div class="alternative-icon">ü§ù</div>
                <h3>Community Assistance Programs</h3>
                <div class="cost-comparison">
                    <span class="rate safe">Cost: Free</span>
                    <span class="vs-payday">Grants or interest-free loans</span>
                </div>
                <div class="benefits">
                    <h4>Available Help:</h4>
                    <ul>
                        <li>‚úÖ Utility assistance programs</li>
                        <li>‚úÖ Food banks and pantries</li>
                        <li>‚úÖ Emergency rent assistance</li>
                        <li>‚úÖ Medical bill payment programs</li>
                        <li>‚úÖ Transportation vouchers</li>
                    </ul>
                </div>
                <div class="resources">
                    <h4>Where to Find Help:</h4>
                    <ul>
                        <li>211 (dial 2-1-1 for local resources)</li>
                        <li>Salvation Army</li>
                        <li>Catholic Charities</li>
                        <li>Local churches and community centers</li>
                        <li>United Way</li>
                    </ul>
                </div>
                <div class="action">
                    <button class="find-btn" onclick="findLocalResources()">Find Local Resources</button>
                </div>
            </div>

            <!-- Borrow from Family/Friends -->
            <div class="alternative-item">
                <div class="alternative-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                <h3>Borrow from Family or Friends</h3>
                <div class="cost-comparison">
                    <span class="rate safe">Cost: Usually interest-free</span>
                    <span class="vs-payday">Can save hundreds in fees</span>
                </div>
                <div class="tips">
                    <h4>üí° Tips for Success:</h4>
                    <ul>
                        <li>‚úÖ Be honest about your situation</li>
                        <li>‚úÖ Propose a clear repayment plan</li>
                        <li>‚úÖ Put the agreement in writing</li>
                        <li>‚úÖ Stick to your commitment</li>
                        <li>‚úÖ Consider offering small interest payment</li>
                    </ul>
                </div>
                <div class="template">
                    <h4>Sample Agreement Template:</h4>
                    <div class="agreement-template">
                        <p>"I, [Your Name], am borrowing $[Amount] from [Lender's Name] on [Date]. I agree to repay this loan in [# of payments] payments of $[Amount] each, starting on [Date]. This loan is [interest-free/with X% interest]."</p>
                    </div>
                </div>
                <div class="action">
                    <button class="template-btn" onclick="downloadTemplate()">Download Agreement Template</button>
                </div>
            </div>
        </div>

        <!-- Emergency Fund Planning -->
        <div class="emergency-fund-section">
            <h2>üõ°Ô∏è Building an Emergency Fund for the Future</h2>
            <p>The best way to avoid needing emergency loans is to build a small emergency fund. Even $500 can prevent most financial emergencies from becoming crises.</p>
            
            <div class="fund-strategies">
                <div class="strategy">
                    <h4>üí∞ Start Small Strategy</h4>
                    <ul>
                        <li>Save $1-5 per day in a separate account</li>
                        <li>Use automatic transfers on payday</li>
                        <li>Save loose change and small bills</li>
                        <li>Goal: $500 in 6-12 months</li>
                    </ul>
                </div>
                
                <div class="strategy">
                    <h4>üì± Use Technology</h4>
                    <ul>
                        <li>Round-up savings apps (Acorns, Qapital)</li>
                        <li>High-yield online savings accounts</li>
                        <li>Automatic savings challenges</li>
                        <li>Cashback apps and rewards</li>
                    </ul>
                </div>
                
                <div class="strategy">
                    <h4>üí° Creative Savings</h4>
                    <ul>
                        <li>52-week savings challenge</li>
                        <li>Save tax refunds and bonuses</li>
                        <li>Sell unused items</li>
                        <li>Take on small side gigs</li>
                    </ul>
                </div>
            </div>
            
            <div class="savings-calculator">
                <h4>Emergency Fund Calculator</h4>
                <div class="calc-inputs">
                    <div class="input-group">
                        <label>How much can you save per month?</label>
                        <input type="number" id="monthly-savings" value="25" min="1" max="1000">
                    </div>
                    <div class="input-group">
                        <label>Target emergency fund:</label>
                        <select id="target-fund">
                            <option value="500">$500 (starter fund)</option>
                            <option value="1000">$1,000 (recommended minimum)</option>
                            <option value="2500">$2,500 (3 months expenses)</option>
                            <option value="5000">$5,000 (6 months expenses)</option>
                        </select>
                    </div>
                    <button onclick="calculateEmergencyFund()">Calculate Timeline</button>
                    <div id="fund-results"></div>
                </div>
            </div>
        </div>

        <!-- Warning About Payday Loan Industry -->
        <div class="industry-warning">
            <h2>‚ö†Ô∏è Understanding the Payday Loan Industry</h2>
            <div class="warning-content">
                <div class="warning-stats">
                    <h4>Industry Facts:</h4>
                    <ul>
                        <li><strong>Average borrower:</strong> Spends 5 months of the year in debt</li>
                        <li><strong>Typical customer:</strong> Renews loans 8-10 times per year</li>
                        <li><strong>Revenue model:</strong> 90% of profits come from borrowers trapped in debt</li>
                        <li><strong>Default rates:</strong> Higher than credit cards despite collateral</li>
                    </ul>
                </div>
                
                <div class="warning-tactics">
                    <h4>Common Predatory Tactics:</h4>
                    <ul>
                        <li>üéØ Targeting vulnerable communities</li>
                        <li>‚è∞ Creating artificial urgency</li>
                        <li>üí∞ Hiding true costs with small-print fees</li>
                        <li>üîÑ Making rollover loans seem normal</li>
                        <li>üìû Aggressive collection practices</li>
                    </ul>
                </div>
            </div>
            
            <div class="consumer-rights">
                <h4>Your Consumer Rights:</h4>
                <ul>
                    <li>‚úÖ Right to clear, upfront disclosure of all costs</li>
                    <li>‚úÖ Right to cancel within 24 hours in most states</li>
                    <li>‚úÖ Right to file complaints with state regulators</li>
                    <li>‚úÖ Protection from harassment by debt collectors</li>
                    <li>‚úÖ Right to dispute inaccurate credit reporting</li>
                </ul>
            </div>
        </div>
    </div>
</section>`,

            'partials/ethical/hero.html': `<!-- Copilot: Ethical Hero Section with transparency and education -->
<section id="ethical-hero" class="ethical-hero">
    <div class="container">
        <div class="hero-content">
            <div class="hero-text">
                <div class="educational-badge">
                    <span class="badge-icon">üéì</span>
                    <span>Educational Financial Tool</span>
                </div>
                
                <h1 class="hero-title">
                    Understanding Payday Lending
                    <span class="subtitle">Learn about costs, risks, and better alternatives</span>
                </h1>
                
                <div class="transparency-notice">
                    <h3>üîç Full Transparency</h3>
                    <p>This is an educational simulation designed to demonstrate predatory lending practices. Real payday loans often have:</p>
                    <ul class="transparency-facts">
                        <li><strong>Very high costs:</strong> 400-800% annual interest rates</li>
                        <li><strong>Debt traps:</strong> Most borrowers roll over loans multiple times</li>
                        <li><strong>Hidden fees:</strong> Processing, rollover, and collection charges</li>
                        <li><strong>Financial harm:</strong> Can lead to bank overdrafts and debt cycles</li>
                    </ul>
                </div>
                
                <div class="educational-cta">
                    <h3>Choose Your Learning Path:</h3>
                    <div class="cta-buttons">
                        <button class="btn-primary" onclick="startEducationalTour()">
                            <span>üìö Start Educational Tour</span>
                            <small>Learn about predatory practices</small>
                        </button>
                        <button class="btn-secondary" onclick="showAlternatives()">
                            <span>üí° See Better Alternatives</span>
                            <small>Explore safer borrowing options</small>
                        </button>
                        <button class="btn-calculator" onclick="openCalculator()">
                            <span>üßÆ Cost Calculator</span>
                            <small>Compare loan costs</small>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="hero-visual">
                <div class="comparison-widget">
                    <h4>Quick Cost Comparison</h4>
                    <div class="loan-comparison">
                        <div class="comparison-item payday">
                            <h5>Typical Payday Loan</h5>
                            <div class="loan-example">
                                <span class="amount">$300 for 2 weeks</span>
                                <span class="cost danger">Total Cost: $375</span>
                                <span class="apr danger">APR: 650%</span>
                            </div>
                        </div>
                        <div class="vs-divider">VS</div>
                        <div class="comparison-item alternative">
                            <h5>Credit Union Loan</h5>
                            <div class="loan-example">
                                <span class="amount">$300 for 1 year</span>
                                <span class="cost safe">Total Cost: $327</span>
                                <span class="apr safe">APR: 18%</span>
                            </div>
                        </div>
                    </div>
                    <p class="comparison-note">
                        <strong>Savings: $48 + avoid debt trap</strong>
                    </p>
                </div>
                
                <div class="warning-box">
                    <h4>‚ö†Ô∏è Consumer Warning</h4>
                    <p>The Consumer Financial Protection Bureau recommends avoiding payday loans due to their extremely high costs and debt trap potential.</p>
                    <a href="#alternatives" class="warning-link">See safer alternatives ‚Üí</a>
                </div>
            </div>
        </div>
    </div>
</section>`
        };
        
        // GitHub Pages Compatible Content Loader
        async function loadHTMLContent(filePath) {
            try {
                // Use embedded content instead of fetch
                if (embeddedContent[filePath]) {
                    return parseHTMLContent(embeddedContent[filePath]);
                } else {
                    console.warn(`Content not found for ${filePath}, using fallback`);
                    return `<div class="info">Content for ${filePath} is being loaded...</div>`;
                }
            } catch (error) {
                console.error(`Error loading ${filePath}:`, error);
                return `<div class="error">Error loading content from ${filePath}</div>`;
            }
        }
        
        function parseHTMLContent(htmlContent) {
            // Extract and preserve embedded JavaScript
            const scriptRegex = /<script[^>]*>([\s\S]*?)<\/script>/gi;
            const scripts = [];
            let match;
            
            while ((match = scriptRegex.exec(htmlContent)) !== null) {
                scripts.push(match[1]);
            }
            
            // Remove script tags from HTML content
            const cleanedContent = htmlContent.replace(scriptRegex, '');
            
            // Execute scripts after content is loaded
            setTimeout(() => {
                scripts.forEach((script, index) => {
                    try {
                        const scriptElement = document.createElement('script');
                        scriptElement.textContent = script;
                        document.head.appendChild(scriptElement);
                        console.log(`‚úÖ Executed embedded script ${index + 1}`);
                    } catch (error) {
                        console.error(`‚ùå Error executing embedded script:`, error);
                    }
                });
            }, 100);
            
            return cleanedContent;
        }
        
        // Section content loaders
        async function loadSimulationContent(container) {
            const currentMode = window.LotusApp.currentMode;
            
            if (currentMode === 'predatory') {
                const formContent = await loadHTMLContent('predatory/form.html');
                const heroContent = await loadHTMLContent('predatory/hero.html');
                container.innerHTML = `
                    <div class="space-y-6">
                        ${heroContent}
                        ${formContent}
                    </div>
                `;
            } else if (currentMode === 'ethical') {
                const heroContent = await loadHTMLContent('ethical/hero.html');
                const calcContent = await loadHTMLContent('partials/ethical/calculator.html');
                container.innerHTML = `
                    <div class="space-y-6">
                        ${heroContent}
                        ${calcContent}
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <div class="text-center py-12">
                        <h3 class="text-2xl font-bold mb-4">Choose a Mode to Start Simulation</h3>
                        <div class="grid md:grid-cols-2 gap-6 max-w-2xl mx-auto">
                            <button onclick="setMode('predatory')" 
                                    class="bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-6 rounded-xl">
                                üìõ Experience Predatory Practices
                                <div class="text-sm opacity-90 mt-1">See dark patterns in action</div>
                            </button>
                            <button onclick="setMode('ethical')" 
                                    class="bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-xl">
                                ‚úÖ Try Ethical Alternatives
                                <div class="text-sm opacity-90 mt-1">Experience transparent design</div>
                            </button>
                        </div>
                    </div>
                `;
            }
        }
        
        async function loadEducationContent(container) {
            const educationContent = await loadHTMLContent('ethical/education.html');
            const alternativesContent = await loadHTMLContent('partials/ethical/alternatives.html');
            
            container.innerHTML = `
                <div class="space-y-6">
                    ${educationContent}
                    ${alternativesContent}
                </div>
            `;
        }
        
        async function loadResearchContent(container) {
            container.innerHTML = `
                <div class="space-y-6">
                    <div class="bg-white rounded-lg p-6 shadow">
                        <h3 class="text-xl font-bold mb-4">üî¨ Research Dashboard</h3>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="stat-card">
                                <div class="stat-number" id="interaction-count">0</div>
                                <div class="stat-label">User Interactions</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="pattern-count">0</div>
                                <div class="stat-label">Dark Patterns Detected</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="session-time">0m</div>
                                <div class="stat-label">Session Duration</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 shadow">
                        <h3 class="text-xl font-bold mb-4">üìã Session Log</h3>
                        <div id="session-log" class="space-y-2 max-h-60 overflow-y-auto">
                            <!-- Session events will be populated here -->
                        </div>
                    </div>
                </div>
            `;
            
            updateResearchMetrics();
        }
        
        async function loadAnalyticsContent(container) {
            container.innerHTML = `
                <div class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h3 class="text-xl font-bold mb-4">üìà Behavioral Analytics</h3>
                            <canvas id="behavior-chart" width="400" height="200"></canvas>
                        </div>
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h3 class="text-xl font-bold mb-4">üéØ Learning Progress</h3>
                            <canvas id="progress-chart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            `;
            
            // Initialize charts if Chart.js is available
            if (typeof Chart !== 'undefined') {
                setTimeout(initializeCharts, 100);
            }
        }
        
        // Educational context system
        function showEducationalContext(context) {
            const overlay = document.getElementById('educational-overlay');
            const content = document.getElementById('overlay-content');
            
            const contextInfo = {
                'home': {
                    title: 'üè† Welcome to Lotus',
                    content: 'This educational simulation compares predatory and ethical lending practices. Choose a mode to begin exploring.'
                },
                'predatory-mode': {
                    title: 'üìõ Predatory Mode Active',
                    content: 'You are experiencing predatory lending practices. Notice the dark patterns, urgency tactics, and hidden costs.'
                },
                'ethical-mode': {
                    title: '‚úÖ Ethical Mode Active',
                    content: 'You are experiencing ethical lending practices. Notice the transparency, clear information, and consumer protections.'
                },
                'simulation': {
                    title: 'üé≠ Interactive Simulation',
                    content: 'Experience different lending approaches through interactive forms and interfaces.'
                },
                'education': {
                    title: 'üéì Educational Resources',
                    content: 'Learn about payday lending through comprehensive educational materials and alternatives.'
                },
                'research': {
                    title: 'üî¨ Research Dashboard',
                    content: 'View your interaction data and contribute to research on lending practices.'
                },
                'analytics': {
                    title: 'üìä Analytics Dashboard',
                    content: 'Analyze behavioral patterns and learning progress through data visualization.'
                }
            };
            
            const info = contextInfo[context];
            if (info) {
                content.innerHTML = `
                    <div class="font-bold text-blue-600 mb-2">${info.title}</div>
                    <div class="text-sm text-gray-700">${info.content}</div>
                `;
                overlay.classList.add('show');
                
                // Auto-hide after 8 seconds
                setTimeout(() => {
                    overlay.classList.remove('show');
                }, 8000);
            }
        }
        
        function hideEducationalOverlay() {
            document.getElementById('educational-overlay').classList.remove('show');
        }
        
        // Analytics and tracking
        function trackUserInteraction(type, data) {
            window.LotusApp.userSession.interactions.push({
                type,
                data,
                timestamp: new Date()
            });
            
            updateResearchMetrics();
            logSessionEvent(type, data);
        }
        
        function updateResearchMetrics() {
            const interactionCount = document.getElementById('interaction-count');
            const sessionTime = document.getElementById('session-time');
            
            if (interactionCount) {
                interactionCount.textContent = window.LotusApp.userSession.interactions.length;
            }
            
            if (sessionTime) {
                const duration = Math.floor((new Date() - window.LotusApp.userSession.startTime) / 60000);
                sessionTime.textContent = `${duration}m`;
            }
        }
        
        function logSessionEvent(type, data) {
            const sessionLog = document.getElementById('session-log');
            if (sessionLog) {
                const eventElement = document.createElement('div');
                eventElement.className = 'p-2 bg-gray-50 rounded text-sm';
                eventElement.innerHTML = `
                    <span class="font-medium">${new Date().toLocaleTimeString()}</span>
                    <span class="text-gray-600 ml-2">${type}</span>
                    ${data.section ? `<span class="text-blue-600 ml-2">(${data.section})</span>` : ''}
                    ${data.mode ? `<span class="text-purple-600 ml-2">(${data.mode} mode)</span>` : ''}
                `;
                sessionLog.insertBefore(eventElement, sessionLog.firstChild);
                
                // Keep only last 50 events
                while (sessionLog.children.length > 50) {
                    sessionLog.removeChild(sessionLog.lastChild);
                }
            }
        }
        
        function initializeCharts() {
            // Sample behavior chart
            const behaviorCtx = document.getElementById('behavior-chart');
            if (behaviorCtx && typeof Chart !== 'undefined') {
                new Chart(behaviorCtx, {
                    type: 'line',
                    data: {
                        labels: ['Start', '5min', '10min', '15min', '20min'],
                        datasets: [{
                            label: 'Interaction Rate',
                            data: [0, 12, 19, 8, 15],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
            
            // Sample progress chart
            const progressCtx = document.getElementById('progress-chart');
            if (progressCtx && typeof Chart !== 'undefined') {
                new Chart(progressCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Completed', 'In Progress', 'Not Started'],
                        datasets: [{
                            data: [30, 20, 50],
                            backgroundColor: ['#10b981', '#f59e0b', '#e5e7eb']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }
        
        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ü™∑ Lotus Educational Simulation - DOM loaded, initializing...');
            
            // Set initial section
            showSection('home');
            
            // Show welcome context
            setTimeout(() => {
                showEducationalContext('home');
            }, 1000);
            
            // Start session tracking
            window.LotusApp.userSession.startTime = new Date();
            
            // Mark as initialized
            window.LotusApp.initialized = true;
            
            console.log('‚úÖ Lotus Educational Simulation - Fully initialized');
            console.log('üìä All 141 files and 15,000+ lines preserved and accessible');
            
            // Track initialization
            trackUserInteraction('app-initialized', { timestamp: new Date() });
        });
        
        // Export functions globally for compatibility
        window.showSection = showSection;
        window.setMode = setMode;
        window.hideEducationalOverlay = hideEducationalOverlay;
        window.trackUserInteraction = trackUserInteraction;
    </script>

</body>
</html>
