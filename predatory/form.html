<!-- Copilot: do not overwrite -->
<!-- Predatory Loan Application Form - Designed with dark patterns -->
<div class="loan-application predatory-form">
  <div class="form-container">
    <div class="form-header">
      <h3>üöÄ Almost There! Complete Your Application</h3>
      <div class="progress-bar-fake">
        <div class="progress-fill" style="width: 85%"></div>
        <span class="progress-text">85% Complete - Don't lose your spot!</span>
      </div>
    </div>

    <form id="predatory-loan-form" class="multi-step-form">
      <!-- Step 1: Basic Info (appears complete) -->
      <div class="form-step active" data-step="1">
        <div class="urgency-message">
          ‚ö†Ô∏è <strong>3 people</strong> are viewing this offer right now!
        </div>
        
        <div class="form-row">
          <input type="text" id="first-name" placeholder="First Name" required class="form-field">
          <input type="text" id="last-name" placeholder="Last Name" required class="form-field">
        </div>
        
        <div class="form-row">
          <input type="email" id="email" placeholder="Email Address" required class="form-field">
          <input type="tel" id="phone" placeholder="Phone Number" required class="form-field">
        </div>

        <div class="pre-checked-section">
          <!-- Pre-checked checkboxes - dark pattern -->
          <label class="checkbox-container">
            <input type="checkbox" id="marketing-consent" checked>
            <span class="checkmark"></span>
            I want to receive exclusive offers and updates
          </label>
          
          <label class="checkbox-container">
            <input type="checkbox" id="data-sharing" checked>
            <span class="checkmark"></span>
            I consent to sharing my information with partners for better rates
          </label>
        </div>

        <button type="button" class="next-step-btn" onclick="nextStep()">
          CONTINUE TO GET MY MONEY ‚Üí
        </button>
      </div>

      <!-- Step 2: Financial Info -->
      <div class="form-step" data-step="2">
        <h4>üìä Quick Financial Details</h4>
        
        <div class="income-slider-section">
          <label for="income-slider">Monthly Income: <span id="income-display">$3,000</span></label>
          <input type="range" id="income-slider" min="1000" max="8000" value="3000" class="slider">
          <div class="slider-labels">
            <span>$1,000</span>
            <span>$8,000+</span>
          </div>
        </div>

        <div class="form-row">
          <select id="employment-status" class="form-field" required>
            <option value="">Employment Status</option>
            <option value="full-time">Full-time Employed</option>
            <option value="part-time">Part-time Employed</option>
            <option value="self-employed">Self-employed</option>
            <option value="unemployed">Between Jobs</option>
          </select>
          
          <input type="text" id="employer" placeholder="Employer Name" class="form-field">
        </div>

        <div class="loan-amount-section">
          <h5>How much do you need? <span class="recommended-badge">RECOMMENDED</span></h5>
          <div class="amount-buttons">
            <button type="button" class="amount-btn" data-amount="300">$300</button>
            <button type="button" class="amount-btn recommended" data-amount="500">$500</button>
            <button type="button" class="amount-btn" data-amount="800">$800</button>
            <button type="button" class="amount-btn" data-amount="1000">$1,000</button>
            <button type="button" class="amount-btn" data-amount="1500">$1,500</button>
          </div>
        </div>

        <button type="button" class="next-step-btn" onclick="nextStep()">
          CONTINUE TO APPROVAL ‚Üí
        </button>
      </div>

      <!-- Step 3: Banking & "Terms" -->
      <div class="form-step" data-step="3">
        <h4>üè¶ Secure Banking Details</h4>
        
        <div class="form-row">
          <input type="text" id="bank-name" placeholder="Bank Name" required class="form-field">
          <select id="account-type" class="form-field" required>
            <option value="">Account Type</option>
            <option value="checking">Checking</option>
            <option value="savings">Savings</option>
          </select>
        </div>
        
        <div class="form-row">
          <input type="text" id="routing-number" placeholder="Routing Number" required class="form-field">
          <input type="text" id="account-number" placeholder="Account Number" required class="form-field">
        </div>

        <!-- Hidden/Obscured Terms Section -->
        <div class="terms-section">
          <div class="terms-header" onclick="toggleTerms()">
            <span>üìÑ Terms & Conditions</span>
            <span class="terms-toggle">+</span>
          </div>
          
          <div class="terms-content hidden" id="terms-content">
            <div class="terms-scroll">
              <p class="fine-print">
                By clicking submit, you agree to the loan terms including automatic renewal, 
                collection fees up to $150, binding arbitration, and data sharing with third parties. 
                APR ranges from 391% to 782% depending on loan term and state regulations. 
                This loan will automatically renew if not repaid by due date with additional fees.
                Failed payments may result in collection activities and negative credit reporting.
                You waive rights to class action lawsuits and agree to individual arbitration only.
              </p>
            </div>
          </div>

          <!-- Deceptive consent checkboxes -->
          <label class="checkbox-container required">
            <input type="checkbox" id="terms-agreement" required>
            <span class="checkmark"></span>
            I have read and agree to the terms above
          </label>

          <!-- Pre-checked auto-renewal -->
          <label class="checkbox-container">
            <input type="checkbox" id="auto-renewal" checked>
            <span class="checkmark"></span>
            Enable convenient auto-renewal (Recommended for peace of mind)
          </label>
        </div>

        <div class="final-cta">
          <div class="approval-guarantee">
            <span class="guarantee-badge">üíØ GUARANTEED APPROVAL</span>
            <p>Get your money in the next 15 minutes!</p>
          </div>
          
          <button type="submit" class="submit-btn pulse-animation">
            GET MY $<span id="selected-amount">500</span> NOW!
          </button>
          
          <p class="urgency-text">‚è∞ This offer expires in <span id="form-countdown">4:23</span></p>
        </div>
      </div>
    </form>
  </div>
</div>

<script>
let currentStep = 1;
const totalSteps = 3;

function nextStep() {
  if (currentStep < totalSteps) {
    // Hide current step
    document.querySelector(`[data-step="${currentStep}"]`).classList.remove('active');
    
    // Show next step
    currentStep++;
    document.querySelector(`[data-step="${currentStep}"]`).classList.add('active');
    
    // Update fake progress
    updateProgress();
    
    // Add fake urgency
    if (currentStep === 2) {
      showUrgencyMessage("‚ö†Ô∏è 2 other applications submitted in the last 5 minutes!");
    }
    
    if (currentStep === 3) {
      showUrgencyMessage("üî• You're pre-approved! Complete now to secure your rate!");
    }
  }
}

function updateProgress() {
  const progressFill = document.querySelector('.progress-fill');
  const progressText = document.querySelector('.progress-text');
  const percentage = Math.round((currentStep / totalSteps) * 100);
  
  progressFill.style.width = `${percentage}%`;
  progressText.textContent = `${percentage}% Complete - Almost there!`;
}

function toggleTerms() {
  const content = document.getElementById('terms-content');
  const toggle = document.querySelector('.terms-toggle');
  
  if (content.classList.contains('hidden')) {
    content.classList.remove('hidden');
    toggle.textContent = '‚àí';
  } else {
    content.classList.add('hidden');
    toggle.textContent = '+';
  }
}

function showUrgencyMessage(message) {
  const urgencyDiv = document.createElement('div');
  urgencyDiv.className = 'urgency-popup-message';
  urgencyDiv.innerHTML = `
    <div class="urgency-content">
      <p>${message}</p>
      <button onclick="this.parentElement.parentElement.remove()">Got it!</button>
    </div>
  `;
  document.body.appendChild(urgencyDiv);
  
  setTimeout(() => {
    if (urgencyDiv.parentElement) {
      urgencyDiv.remove();
    }
  }, 5000);
}

// Amount selection handling
document.addEventListener('DOMContentLoaded', function() {
  const amountButtons = document.querySelectorAll('.amount-btn');
  const selectedAmountSpan = document.getElementById('selected-amount');
  
  amountButtons.forEach(btn => {
    btn.addEventListener('click', function() {
      // Remove active class from all buttons
      amountButtons.forEach(b => b.classList.remove('active'));
      
      // Add active class to clicked button
      this.classList.add('active');
      
      // Update selected amount display
      const amount = this.dataset.amount;
      selectedAmountSpan.textContent = amount;
    });
  });
  
  // Pre-select recommended amount
  document.querySelector('[data-amount="500"]').classList.add('active');
  
  // Income slider
  const incomeSlider = document.getElementById('income-slider');
  const incomeDisplay = document.getElementById('income-display');
  
  incomeSlider.addEventListener('input', function() {
    incomeDisplay.textContent = `$${parseInt(this.value).toLocaleString()}`;
  });
  
  // Form countdown
  startFormCountdown();
});

function startFormCountdown() {
  let timeLeft = 263; // 4:23
  const display = document.getElementById('form-countdown');
  
  setInterval(() => {
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    display.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
    
    timeLeft--;
    if (timeLeft < 0) timeLeft = 263; // Reset
  }, 1000);
}

// Form submission handling
document.getElementById('predatory-loan-form').addEventListener('submit', function(e) {
  e.preventDefault();
  
  // Show fake "processing" then redirect to ethical mode for comparison
  showProcessingMessage();
});

function showProcessingMessage() {
  const overlay = document.createElement('div');
  overlay.className = 'processing-overlay';
  overlay.innerHTML = `
    <div class="processing-content">
      <div class="spinner"></div>
      <h3>üéâ Congratulations! You're Approved!</h3>
      <p>Processing your application...</p>
      <p class="fine-print">This is a simulation. Click below to see the ethical alternative.</p>
      <button onclick="switchToEthical()" class="ethical-btn">See Ethical Design</button>
    </div>
  `;
  document.body.appendChild(overlay);
}

function switchToEthical() {
  // This would trigger the mode switch in the main application
  window.parent.postMessage({type: 'switchMode', mode: 'ethical'}, '*');
}
</script>