<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Copilot: 73-file scaffold - Direct HTML includes preserving all Lotus content -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lotus Payday Loan Simulator</title>
  <link rel="stylesheet" href="assets/global.css">
  <link rel="stylesheet" href="predatory/styles.css" id="pred-styles">
  <link rel="stylesheet" href="ethical/styles.css" id="eth-styles" disabled>
</head>
<body>
  <!-- Mode Switch -->
  <div class="mode-switch-container">
    <label class="mode-switch-label">
      <input type="checkbox" id="mode-switch"> 
      <span class="switch-slider"></span>
      <span class="switch-text">Ethical Redesign</span>
    </label>
  </div>

  <!-- Predatory UI Include -->
  <section id="predatory-ui">
    <!-- Copilot: include predatory/hero.html here -->
    <iframe src="predatory/hero.html" class="content-frame" id="predatory-hero-frame"></iframe>
    
    <!-- Copilot: include predatory/slider.html here -->
    <iframe src="predatory/slider.html" class="content-frame" id="predatory-slider-frame"></iframe>
    
    <!-- Copilot: include predatory/form.html here -->
    <iframe src="predatory/form.html" class="content-frame" id="predatory-form-frame"></iframe>
    
    <!-- Copilot: include predatory/faq.html here -->
    <iframe src="predatory/faq.html" class="content-frame" id="predatory-faq-frame"></iframe>
    
    <!-- Copilot: include predatory/trust-signals.html here -->
    <iframe src="predatory/trust-signals.html" class="content-frame" id="predatory-trust-signals-frame"></iframe>
    
    <!-- Copilot: include predatory/terms.html here -->
    <iframe src="predatory/terms.html" class="content-frame" id="predatory-terms-frame"></iframe>
  </section>

  <!-- Ethical UI Include -->
  <section id="ethical-ui" style="display:none;">
    <!-- Copilot: include ethical/hero.html here -->
    <iframe src="ethical/hero.html" class="content-frame" id="ethical-hero-frame"></iframe>
    
    <!-- Copilot: include ethical/form-step1.html here -->
    <iframe src="ethical/form-step1.html" class="content-frame" id="ethical-form-step1-frame"></iframe>
    
    <!-- Copilot: include ethical/form-step2.html here -->
    <iframe src="ethical/form-step2.html" class="content-frame" id="ethical-form-step2-frame"></iframe>
    
    <!-- Copilot: include ethical/apr-display.html here -->
    <iframe src="ethical/apr-display.html" class="content-frame" id="ethical-apr-display-frame"></iframe>
    
    <!-- Copilot: include ethical/education.html here -->
    <iframe src="ethical/education.html" class="content-frame" id="ethical-education-frame"></iframe>
  </section>

  <script src="assets/global.js" type="module"></script>
  <script src="predatory/countdown.js" type="module"></script>

  <style>
    /* Copilot: Frame-based include system for GitHub Pages */
    .mode-switch-container {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 1000;
    }

    .mode-switch-label {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
      cursor: pointer;
    }

    .switch-slider {
      position: relative;
      width: 50px;
      height: 24px;
      background: #ccc;
      border-radius: 24px;
      transition: 0.3s;
    }

    .switch-slider:before {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      top: 2px;
      left: 2px;
      transition: 0.3s;
    }

    #mode-switch:checked + .switch-slider {
      background: #4CAF50;
    }

    #mode-switch:checked + .switch-slider:before {
      transform: translateX(26px);
    }

    #mode-switch {
      display: none;
    }

    .content-frame {
      width: 100%;
      border: none;
      margin: 0;
      padding: 0;
      display: block;
      min-height: 400px;
    }

    /* Auto-resize frames */
    .content-frame {
      height: auto;
      overflow: hidden;
    }

    @media (max-width: 768px) {
      .mode-switch-container {
        position: relative;
        top: auto;
        right: auto;
        margin: 20px;
        width: calc(100% - 40px);
      }
    }
  </style>

  <script>
    // Copilot: Do not overwrite - Mode switching functionality
    document.addEventListener('DOMContentLoaded', function() {
      const switchEl = document.getElementById('mode-switch');
      const predStyles = document.getElementById('pred-styles');
      const ethStyles = document.getElementById('eth-styles');
      
      if (switchEl) {
        switchEl.addEventListener('change', () => {
          const ethical = switchEl.checked;
          const predatoryUI = document.getElementById('predatory-ui');
          const ethicalUI = document.getElementById('ethical-ui');
          
          if (predatoryUI && ethicalUI) {
            predatoryUI.style.display = ethical ? 'none' : 'block';
            ethicalUI.style.display = ethical ? 'block' : 'none';
          }
          
          if (predStyles && ethStyles) {
            predStyles.disabled = ethical;
            ethStyles.disabled = !ethical;
          }
          
          // Auto-resize frames after mode switch
          setTimeout(autoResizeFrames, 100);
        });
      }

      // Initialize frame auto-resizing
      setTimeout(autoResizeFrames, 1000);
      
      // Connect to existing Lotus app
      if (window.LotusApp) {
        window.LotusApp.currentInterface = 'scaffold';
        console.log('Lotus 73-file scaffold with iframe includes ready');
      }
    });

    function autoResizeFrames() {
      const frames = document.querySelectorAll('.content-frame');
      frames.forEach(frame => {
        frame.onload = function() {
          try {
            const frameDoc = frame.contentDocument || frame.contentWindow.document;
            const height = frameDoc.body.scrollHeight;
            frame.style.height = height + 'px';
          } catch (e) {
            // Cross-origin restriction, use default height
            frame.style.height = 'auto';
          }
        };
      });
    }
  </script>
</body>
</html>
